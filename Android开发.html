<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Androidå¼€å‘ - åšå®¢æœªå‘½å
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="åšå®¢æœªå‘½å" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:lixindong.top ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; åšå®¢æœªå‘½å</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
       
       <li><a href="index.html">HOME</a></li>
    <li><a href="archives.html">Archives</a></li>
    <li><a href="about.html">ABOUT</a></li>

    <li><label>Categories</label></li>

        
            <li><a href="%E7%94%9F%E6%B4%BB%E6%97%A5%E5%B8%B8.html">ç”Ÿæ´»æ—¥å¸¸</a></li>
        
            <li><a href="%E7%BB%98%E7%94%BB.html">ç»˜ç”»</a></li>
        
            <li><a href="Android%E5%BC%80%E5%8F%91.html">Androidå¼€å‘</a></li>
        
            <li><a href="%E4%BA%A7%E5%93%81%E6%83%B3%E6%B3%95.html">äº§å“æƒ³æ³•</a></li>
        
            <li><a href="%E5%90%89%E5%AE%83%E5%AD%A6%E4%B9%A0%F0%9F%8E%B8.html">å‰å®ƒå­¦ä¹ ğŸ¸</a></li>
        
            <li><a href="web%E5%BC%80%E5%8F%91.html">webå¼€å‘</a></li>
        
            <li><a href="%E4%B9%A6%E7%B1%8D%E7%94%B5%E5%BD%B1.html">ä¹¦ç±ç”µå½±</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="14864276588598.html">
                
                  <h1>æ·±å…¥ç†è§£LayoutInflater.inflate()</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p><a href="https://www.bignerdranch.com/blog/understanding-androids-layoutinflater-inflate/">åŸæ–‡é“¾æ¥ï¼šhttps://www.bignerdranch.com/blog/understanding-androids-layoutinflater-inflate/</a><br/>
<a href="http://blog.chengdazhi.com/index.php/110">è¯‘æ–‡é“¾æ¥ï¼šhttp://blog.chengdazhi.com/index.php/110</a></p>

<p>ç”±äºæˆ‘ä»¬å¾ˆå®¹æ˜“ä¹ æƒ¯å…¬å¼åŒ–çš„é¢„ç½®ä»£ç ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¼šå¿½ç•¥å¾ˆä¼˜é›…çš„ç»†èŠ‚ã€‚LayoutInflaterä»¥åŠå®ƒåœ¨Fragmentçš„onCreateView()ä¸­å¡«å……Viewçš„æ–¹å¼å¸¦ç»™æˆ‘çš„å°±æ˜¯è¿™æ ·çš„æ„Ÿå—ã€‚è¿™ä¸ªç±»ç”¨äºå°†XMLæ–‡ä»¶è½¬æ¢æˆç›¸å¯¹åº”çš„ViewGroupå’Œæ§ä»¶Widgetã€‚æˆ‘å°è¯•åœ¨Googleå®˜æ–¹æ–‡æ¡£ä¸ç½‘ç»œä¸Šå…¶ä»–è®¨è®ºä¸­å¯»æ‰¾æœ‰å…³çš„è¯´æ˜ï¼Œè€Œåå‘ç°è®¸å¤šäºº<strong>ä¸ä½†ä¸æ¸…æ¥šLayoutInflaterçš„inflate()æ–¹æ³•çš„ç»†èŠ‚ï¼Œè€Œä¸”ç”šè‡³åœ¨è¯¯ç”¨å®ƒã€‚</strong></p>

<p>è¿™é‡Œçš„å›°æƒ‘å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºGoogleä¸Šæœ‰å…³attachToRootï¼ˆä¹Ÿå°±æ˜¯inflate()æ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰çš„æ–‡æ¡£å¤ªæ¨¡ç³Šï¼š</p>

<blockquote>
<p>è¢«å¡«å……çš„å±‚æ˜¯å¦åº”è¯¥é™„åœ¨rootå‚æ•°å†…éƒ¨ï¼Ÿå¦‚æœæ˜¯falseï¼Œrootå‚æ•°åªé€‚ç”¨äºä¸ºXMLæ ¹å…ƒç´ Viewåˆ›å»ºæ­£ç¡®çš„LayoutParamsçš„å­ç±»ã€‚</p>
</blockquote>

<p>å…¶å®æ„æ€å°±æ˜¯ï¼š<strong>å¦‚æœattachToRootæ˜¯trueçš„è¯ï¼Œé‚£ç¬¬ä¸€ä¸ªå‚æ•°çš„layoutæ–‡ä»¶å°±ä¼šè¢«å¡«å……å¹¶é™„åŠ åœ¨ç¬¬äºŒä¸ªå‚æ•°æ‰€æŒ‡å®šçš„ViewGroupå†…ã€‚æ–¹æ³•è¿”å›ç»“åˆåçš„Viewï¼Œæ ¹å…ƒç´ æ˜¯ç¬¬äºŒä¸ªå‚æ•°ViewGroupã€‚å¦‚æœæ˜¯falseçš„è¯ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ‰€æŒ‡å®šçš„layoutæ–‡ä»¶ä¼šè¢«å¡«å……å¹¶ä½œä¸ºViewè¿”å›ã€‚è¿™ä¸ªViewçš„æ ¹å…ƒç´ å°±æ˜¯layoutæ–‡ä»¶çš„æ ¹å…ƒç´ ã€‚ä¸ç®¡æ˜¯trueè¿˜æ˜¯falseï¼Œéƒ½éœ€è¦ViewGroupçš„LayoutParamsæ¥æ­£ç¡®çš„æµ‹é‡ä¸æ”¾ç½®layoutæ–‡ä»¶æ‰€äº§ç”Ÿçš„Viewå¯¹è±¡ã€‚</strong></p>

<p>attachToRootä¼ å…¥trueä»£è¡¨layoutæ–‡ä»¶å¡«å……çš„Viewä¼šè¢«ç›´æ¥æ·»åŠ è¿›ViewGroupï¼Œè€Œä¼ å…¥falseåˆ™ä»£è¡¨åˆ›å»ºçš„Viewä¼šä»¥å…¶ä»–æ–¹å¼è¢«æ·»åŠ è¿›ViewGroupã€‚</p>

<p>è®©æˆ‘ä»¬å°±ä¸¤ç§æƒ…å†µå¤šä¸¾ä¸€äº›ä¾‹å­æ¥æ›´æ·±å…¥çš„ç†è§£ã€‚</p>

<h1 id="toc_0">attachToRootæ˜¯True</h1>

<p>å‡è®¾æˆ‘ä»¬åœ¨XML layoutæ–‡ä»¶ä¸­å†™äº†ä¸€ä¸ªButtonå¹¶æŒ‡å®šäº†å®½é«˜ä¸ºmatch_parentã€‚<br/>
<code><br/>
&lt;Button xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;<br/>
android:layout_width=&quot;match_parent&quot;<br/>
android:layout_height=&quot;match_parent&quot;<br/>
android:id=&quot;@+id/custom_button&quot;&gt;<br/>
&lt;/Button&gt;<br/>
</code></p>

<p>ç°åœ¨æˆ‘ä»¬æƒ³åŠ¨æ€åœ°æŠŠè¿™ä¸ªæŒ‰é’®æ·»åŠ è¿›Fragmentæˆ–Activityçš„LinearLayoutä¸­ã€‚å¦‚æœè¿™é‡ŒLinearLayoutå·²ç»æ˜¯ä¸€ä¸ªæˆå‘˜å˜é‡mLinearLayoutäº†ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡å¦‚ä¸‹ä»£ç è¾¾æˆç›®æ ‡ï¼š</p>

<pre><code>inflater.inflate(R.layout.custom_button, mLinearLayout, true);
</code></pre>

<p>æˆ‘ä»¬æŒ‡å®šäº†ç”¨äºå¡«å……buttonçš„layoutèµ„æºæ–‡ä»¶ï¼Œç„¶åæˆ‘ä»¬å‘Šè¯‰LayoutInflateræˆ‘ä»¬æƒ³æŠŠbuttonæ·»åŠ åˆ°mLinearLayoutä¸­ã€‚è¿™é‡ŒButtonçš„LayoutParamsç§ç±»ä¸ºLinearLayout.LayoutParamsã€‚</p>

<p>ä¸‹é¢çš„ä»£ç ä¹Ÿæœ‰åŒæ ·çš„æ•ˆæœã€‚LayoutInflaterçš„ä¸¤ä¸ªå‚æ•°çš„inflate()æ–¹æ³•è‡ªåŠ¨å°†attachToRootè®¾ç½®ä¸ºtrueã€‚</p>

<pre><code>inflater.inflate(R.layout.custom_button, mLinearLayout);
</code></pre>

<p>å¦ä¸€ç§åœ¨attachToRootä¸­ä¼ é€’trueçš„æƒ…å†µæ˜¯ä½¿ç”¨è‡ªå®šä¹‰Viewã€‚æˆ‘ä»¬çœ‹ä¸€ä¸ªlayoutæ–‡ä»¶ä¸­æ ¹å…ƒç´ æœ‰<merge>æ ‡ç­¾çš„ä¾‹å­ã€‚<merge>æ ‡ç­¾æ ‡è¯†ç€è¿™ä¸ªlayoutæ–‡ä»¶çš„æ ¹ViewGroupå¯ä»¥æœ‰å¤šç§ç±»å‹ã€‚</p>

<pre><code>public class MyCustomView extends LinearLayout {
...
private void init() {
LayoutInflater inflater = LayoutInflater.from(getContext());
inflater.inflate(R.layout.view_with_merge_tag, this);
}
}
</code></pre>

<p>è¿™å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä½¿ç”¨attachToRootçš„ä¾‹å­ã€‚è¿™ä¸ªä¾‹å­ä¸­layoutæ–‡ä»¶æ²¡æœ‰ViewGroupä½œä¸ºæ ¹å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬æŒ‡å®šæˆ‘ä»¬è‡ªå®šä¹‰çš„LinearLayoutä½œä¸ºæ ¹å…ƒç´ ã€‚å¦‚æœlayoutæ–‡ä»¶æœ‰ä¸€ä¸ªFrameLayoutä½œä¸ºæ ¹å…ƒç´ è€Œä¸æ˜¯<merge>ï¼Œé‚£ä¹ˆFrameLayoutå’Œå®ƒçš„å­å…ƒç´ éƒ½å¯ä»¥æ­£å¸¸å¡«å……ï¼Œè€Œåéƒ½ä¼šè¢«æ·»åŠ åˆ°LinearLayoutä¸­ï¼ŒLinearLayoutæ˜¯æ ¹ViewGroupï¼ŒåŒ…å«ç€FrameLayoutå’Œå…¶å­å…ƒç´ ã€‚</merge></p>

<h1 id="toc_1">attachToRootæ˜¯False</h1>

<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»€ä¹ˆæ—¶å€™attachToRootåº”è¯¥æ˜¯falseã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œinflate()æ–¹æ³•ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ‰€æŒ‡å®šçš„Viewä¸ä¼šè¢«æ·»åŠ åˆ°ç¬¬äºŒä¸ªå‚æ•°æ‰€æŒ‡å®šçš„ViewGroupä¸­ã€‚</p>

<p>å›å¿†ä¸€ä¸‹åˆšæ‰çš„ä¾‹å­ä¸­çš„Buttonï¼Œæˆ‘ä»¬æƒ³é€šè¿‡layoutæ–‡ä»¶æ·»åŠ è‡ªå®šä¹‰çš„Buttonè‡³mLinearLayoutä¸­ã€‚å½“attachToRootä¸ºfalseæ—¶ï¼Œæˆ‘ä»¬ä»å¯ä»¥å°†Buttonæ·»åŠ åˆ°mLinearLayoutä¸­ï¼Œä½†æ˜¯è¿™éœ€è¦æˆ‘ä»¬è‡ªå·±åŠ¨æ‰‹ã€‚</p>

<pre><code>Button button = (Button) inflater.inflate(R.layout.custom_button, mLinearLayout, false);
mLinearLayout.addView(button);
</code></pre>

<p>è¿™ä¸¤è¡Œä»£ç ä¸åˆšæ‰attachToRootä¸ºtrueæ—¶çš„ä¸€è¡Œä»£ç ç­‰æ•ˆã€‚é€šè¿‡ä¼ å…¥falseï¼Œæˆ‘ä»¬å‘Šè¯‰LayoutInflateræˆ‘ä»¬ä¸æš‚æ—¶è¿˜æƒ³å°†Viewæ·»åŠ åˆ°æ ¹å…ƒç´ ViewGroupä¸­ï¼Œæ„æ€æ˜¯æˆ‘ä»¬ä¸€ä¼šå„¿å†æ·»åŠ ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸€ä¼šå„¿å†æ·»åŠ å°±æ˜¯åœ¨inflate()åè°ƒç”¨addView()æ–¹æ³•ã€‚</p>

<p>åœ¨å°†attachToRootè®¾ç½®ä¸ºfalseçš„ä¾‹å­ä¸­ï¼Œç”±äºè¦æ‰‹åŠ¨æ·»åŠ Viewè¿›ViewGroupå¯¼è‡´ä»£ç å˜å¤šäº†ã€‚å°†Buttonæ·»åŠ åˆ°LinearLayoutä¸­è¿˜æ˜¯ç”¨ä¸€è¡Œä»£ç ç›´æ¥å°†attachToRootè®¾ç½®ä¸ºtrueç®€ä¾¿ä¸€äº›ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»€ä¹ˆæƒ…å†µä¸‹attachToRootå¿…é¡»ä¼ å…¥falseã€‚</p>

<p>æ¯ä¸€ä¸ªRecyclerViewçš„å­å…ƒç´ éƒ½è¦åœ¨attachToRootè®¾ç½®ä¸ºfalseçš„æƒ…å†µä¸‹å¡«å……ã€‚è¿™é‡Œå­Viewåœ¨onCreateViewHolder()ä¸­å¡«å……ã€‚</p>

<pre><code>public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
LayoutInflater inflater = LayoutInflater.from(getActivity());
View view = inflater.inflate(android.R.layout.list_item_recyclerView, parent, false);
return new ViewHolder(view);
}
</code></pre>

<p>RecyclerViewè´Ÿè´£å†³å®šä»€ä¹ˆæ—¶å€™å±•ç¤ºå®ƒçš„å­Viewï¼Œè¿™ä¸ªä¸ç”±æˆ‘ä»¬å†³å®šã€‚åœ¨ä»»ä½•æˆ‘ä»¬ä¸è´Ÿè´£å°†Viewæ·»åŠ è¿›ViewGroupçš„æƒ…å†µä¸‹éƒ½åº”è¯¥å°†attachToRootè®¾ç½®ä¸ºfalseã€‚</p>

<p>å½“åœ¨Fragmentçš„onCreateView()æ–¹æ³•ä¸­å¡«å……å¹¶è¿”å›Viewæ—¶ï¼Œè¦å°†attachToRootè®¾ä¸ºfalseã€‚å¦‚æœä¼ å…¥trueï¼Œä¼šæŠ›å‡ºIllegalStateExceptionï¼Œå› ä¸ºæŒ‡å®šçš„å­Viewå·²ç»æœ‰çˆ¶Viewäº†ã€‚ä½ éœ€è¦æŒ‡å®šåœ¨å“ªé‡Œå°†Fragmentçš„Viewæ”¾è¿›Activityé‡Œï¼Œè€Œæ·»åŠ ã€ç§»é™¤æˆ–æ›¿æ¢Fragmentåˆ™æ˜¯FragmentManagerçš„äº‹æƒ…ã€‚</p>

<pre><code>FragmentManager fragmentManager = getSupportFragmentManager();
Fragment fragment = fragmentManager.findFragmentById(R.id.root_viewGroup);

if (fragment == null) {
fragment = new MainFragment();
fragmentManager.beginTransaction().add(R.id.root_viewGroup, fragment).commit();
}
</code></pre>

<p>ä¸Šé¢ä»£ç ä¸­root_viewGroupå°±æ˜¯Activityä¸­ç”¨äºæ”¾ç½®Fragmentçš„å®¹å™¨ï¼Œå®ƒä¼šä½œä¸ºinflate()æ–¹æ³•ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°è¢«ä¼ å…¥onCreateView()ä¸­ã€‚å®ƒä¹Ÿæ˜¯ä½ åœ¨inflate()æ–¹æ³•ä¸­ä¼ å…¥çš„ViewGroupã€‚FragmentManagerä¼šå°†Fragmentçš„Viewæ·»åŠ åˆ°ViewGroupä¸­ï¼Œä½ å¯ä¸æƒ³æ·»åŠ ä¸¤æ¬¡ã€‚</p>

<pre><code>public View onCreateView(LayoutInflater inflater, ViewGroup parentViewGroup, Bundle savedInstanceState) {
View view = inflater.inflate(R.layout.fragment_layout, parentViewGroup, false);
â€¦
return view;
}
</code></pre>

<p>é—®é¢˜æ˜¯ï¼šå¦‚æœæˆ‘ä»¬ä¸éœ€åœ¨onCreateView()ä¸­å°†Viewæ·»åŠ è¿›ViewGroupï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä¼ å…¥ViewGroupå‘¢ï¼Ÿä¸ºä»€ä¹ˆinflate()æ–¹æ³•å¿…é¡»è¦ä¼ å…¥æ ¹ViewGroupï¼Ÿ</p>

<p>åŸå› æ˜¯åŠæ—¶ä¸éœ€è¦é©¬ä¸Šå°†æ–°å¡«å……çš„Viewæ·»åŠ è¿›ViewGroupï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦è¿™ä¸ªçˆ¶å…ƒç´ çš„LayoutParamsæ¥åœ¨å°†æ¥æ·»åŠ æ—¶å†³å®šViewçš„sizeå’Œpositionã€‚</p>

<p>ä½ åœ¨ç½‘ä¸Šä¸€å®šä¼šé‡åˆ°ä¸€äº›ä¸æ­£ç¡®çš„å»ºè®®ã€‚æœ‰äº›äººä¼šå»ºè®®ä½ å¦‚æœå°†attachToRootè®¾ç½®ä¸ºfalseçš„è¯ç›´æ¥å°†æ ¹ViewGroupä¼ å…¥nullã€‚ä½†æ˜¯ï¼Œå¦‚æœæœ‰çˆ¶å…ƒç´ çš„è¯ï¼Œè¿˜æ˜¯åº”è¯¥ä¼ å…¥çš„ã€‚</p>

<p><img src="http://upload-images.jianshu.io/upload_images/25769-f6a7daf1df51f931.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="null-root"/></p>

<p>Lintä¼šè­¦å‘Šä½ ä¸è¦è®²nullä½œä¸ºrootä¼ å…¥ã€‚ä½ çš„Appä¸ä¼šæŒ‚æ‰ï¼Œä½†æ˜¯å¯èƒ½ä¼šè¡¨ç°å¼‚å¸¸ã€‚å½“ä½ çš„å­Viewæ²¡æœ‰æ­£ç¡®çš„LayoutParamsæ—¶ï¼Œå®ƒä¼šè‡ªå·±é€šè¿‡<a href="http://developer.android.com/reference/android/view/ViewGroup.html#generateDefaultLayoutParams()">generateDefaultLayoutParams</a>è®¡ç®—ã€‚</p>

<p>ä½ å¯èƒ½å¹¶ä¸æƒ³è¦è¿™äº›é»˜è®¤çš„LayoutParamsã€‚ä½ åœ¨XMLæŒ‡å®šçš„LayoutParamsä¼šè¢«å¿½ç•¥ã€‚æˆ‘ä»¬å¯èƒ½å·²ç»æŒ‡å®šäº†å­Viewè¦å¡«å……çˆ¶å…ƒç´ çš„å®½åº¦ï¼Œä½†çˆ¶Viewåˆwrap_contentå¯¼è‡´æœ€ç»ˆçš„Viewå°å¾ˆå¤šã€‚</p>

<p>ä¸‹é¢æ˜¯ä¸€ç§æ²¡æœ‰ViewGroupä½œä¸ºrootä¼ å…¥inflate()æ–¹æ³•çš„æƒ…å†µã€‚å½“ä¸ºAlertDialogåˆ›å»ºè‡ªå®šä¹‰Viewæ—¶ï¼Œè¿˜æ— æ³•è®¿é—®çˆ¶å…ƒç´ ã€‚</p>

<pre><code>AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(mContext);
View customView = inflater.inflate(R.layout.custom_alert_dialog, null);
...
dialogBuilder.setView(customView);
dialogBuilder.show();
</code></pre>

<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°†nullä½œä¸ºroot ViewGroupä¼ å…¥ã€‚åæ¥æˆ‘å‘ç°AlertDialogè¿˜æ˜¯ä¼šé‡å†™LayoutParamså¹¶è®¾ç½®å„é¡¹å‚æ•°ä¸ºmatch_parentã€‚ä½†æ˜¯ï¼Œè§„åˆ™è¿˜æ˜¯åœ¨æœ‰ViewGroupå¯ä»¥ä¼ å…¥æ—¶ä¼ å…¥å®ƒã€‚</p>

<h1 id="toc_2">é¿å¼€å´©æºƒã€å¼‚å¸¸è¡¨ç°ä¸è¯¯è§£</h1>

<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©ä½ åœ¨ä½¿ç”¨LayoutInflateræ—¶é¿å¼€å´©æºƒã€å¼‚å¸¸è¡¨ç°ä¸è¯¯è§£ã€‚ä¸‹é¢æ•´ç†äº†æ–‡ç« çš„è¦ç‚¹ï¼š</p>

<ul>
<li>  å¦‚æœå¯ä»¥ä¼ å…¥ViewGroupä½œä¸ºæ ¹å…ƒç´ ï¼Œé‚£å°±ä¼ å…¥å®ƒã€‚</li>
<li>  é¿å…å°†nullä½œä¸ºæ ¹ViewGroupä¼ å…¥ã€‚</li>
<li>  å½“æˆ‘ä»¬ä¸è´Ÿè´£å°†layoutæ–‡ä»¶çš„Viewæ·»åŠ è¿›ViewGroupæ—¶è®¾ç½®attachToRootå‚æ•°ä¸ºfalseã€‚</li>
<li>  ä¸è¦åœ¨Viewå·²ç»è¢«æ·»åŠ è¿›ViewGroupæ—¶ä¼ å…¥trueã€‚</li>
<li>  è‡ªå®šä¹‰Viewæ—¶å¾ˆé€‚åˆå°†attachToRootè®¾ç½®ä¸ºtrueã€‚</li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/2/7</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Android%E5%BC%80%E5%8F%91.html'>Androidå¼€å‘</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14730898296691.html">
                
                  <h1>Androidä¸­ Integerå¯¹è±¡ä½¿ç”¨==è¿ç®—ç¬¦è¿˜æ˜¯equals()æ–¹æ³•æ¯”è¾ƒå¤§å°?</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>æœ€è¿‘é¡¹ç›®ç»„ä½¿ç”¨findbugsè¾…åŠ©æ£€æµ‹ä»£ç é—®é¢˜ï¼Œå…¶ä¸­ä¸€ä¸ªé—®é¢˜æåˆ°äº†Integerå¯¹è±¡çš„å€¼æ¯”è¾ƒé—®é¢˜ã€‚è™½ç„¶å¿ƒé‡Œå¾ˆæ¸…æ¥šï¼Œjavaè¯­è¨€ç±»å¯¹è±¡çš„åŒç­‰å·æ“ä½œç¬¦é»˜è®¤æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„åœ°å€ï¼Œå³æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚å¯æ˜¯å¯¹äºIntegerã€Longè¿™ç±»åŸºæœ¬ç±»å‹çš„æ‰©å±•ç±»ï¼Œå¿ƒæƒ³å­˜åœ¨ç‰¹æ®Šå¤„ç†çš„å¯èƒ½ï¼Œæ‰€ä»¥è¿˜æ˜¯æŸ¥äº†ä¸‹èµ„æ–™ï¼Œä¸»è¦æ˜¯è§£é‡Šä¸€äº›å¿ƒé‡Œçš„ç–‘æƒ‘ã€‚</p>

<h2 id="toc_0">ç–‘é—®?</h2>

<ol>
<li>java èƒ½ä¸èƒ½é‡è½½+ã€-ã€ =ã€==è¿™äº›è¿ç®—ç¬¦</li>
<li>javaçš„Integerã€Longè¿™äº›ç±»å‹çš„==è¿ç®—ç¬¦æ˜¯æ¯”è¾ƒåœ°å€è¿˜æ˜¯ä½¿ç”¨<code>equals</code>çš„ç»“æœ</li>
<li>ä¸ºä»€ä¹ˆä¸¤ä¸ªå€¼ä¸º10çš„Integerå¯¹è±¡ï¼Œç”¨==æ¯”è¾ƒçš„ç»“æœæ˜¯trueï¼Œè€Œä¸¤ä¸ªå€¼ä¸º1000çš„Integerå¯¹è±¡çš„æ¯”è¾ƒç»“æœä¸ºfalse?</li>
</ol>

<h2 id="toc_1">è§£ç­”ï¼</h2>

<h3 id="toc_2">1. èƒ½ä¸èƒ½é‡è½½è¿ç®—ç¬¦ï¼Ÿ</h3>

<p>ä¸èƒ½ã€‚<br/>
æœ‰äº›äººç–‘é—®ï¼Œå¯æ˜¯Stringå¯¹è±¡å¯ä»¥æœ‰å½¢å¦‚<code>&quot;hello worl&quot; + &#39;d&#39;</code>çš„æ“ä½œï¼ŒåŸºæœ¬è¿ç®—åº”è¯¥æ˜¯ä¸æ”¯æŒçš„ã€‚<br/>
è¿™é‡Œæ˜¯å› ä¸ºç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å¤„ç†æˆäº†<code>Object s2 = (new StringBuilder(&quot;hello world&quot;)).append(&#39;d&#39;).toString();</code>çš„å½¢å¼ã€‚</p>

<h3 id="toc_3">2. javaçš„Integerã€Longè¿™äº›ç±»å‹çš„==è¿ç®—ç¬¦æ˜¯æ¯”è¾ƒåœ°å€è¿˜æ˜¯ä½¿ç”¨<code>equals</code>çš„ç»“æœ?</h3>

<p>æ¯”è¾ƒåœ°å€ã€‚<br/>
å› ä¸ºä¸èƒ½é‡è½½è¿ç®—ç¬¦ï¼Œæ‰€ä»¥å³ä¾¿æ˜¯è¿™äº›ç‰¹æ®Šçš„ç±»ï¼Œä¾ç„¶åªèƒ½åœ¨ç¼–è¯‘å™¨ä¸ŠåŠ¨åŠ¨æ‰‹è„šã€‚</p>

<h3 id="toc_4">3. ä¸ºä»€ä¹ˆä¸¤ä¸ªå€¼ä¸º10çš„Integerå¯¹è±¡ï¼Œç”¨==æ¯”è¾ƒçš„ç»“æœæ˜¯trueï¼Œè€Œä¸¤ä¸ªå€¼ä¸º1000çš„Integerå¯¹è±¡çš„æ¯”è¾ƒç»“æœä¸ºfalse?</h3>

<p>Integerä¸º-128~127èŒƒå›´å†…çš„å¯¹è±¡åšäº†ç¼“å­˜å¤„ç†ã€‚<br/>
<code><br/>
publicÂ staticÂ IntegerÂ valueOf(intÂ i)Â {<br/>
    if(iÂ &gt;=Â -128Â &amp;&amp;Â iÂ &lt;=Â IntegerCache.high)<br/>
        returnÂ IntegerCache.cache[iÂ +Â 128];<br/>
    else<br/>
        returnÂ newÂ Integer(i);<br/>
}<br/>
</code><br/>
æ— è®ºä½ æ˜¯ä½¿ç”¨new Integer(..)è¿˜æ˜¯Integer.valueOf(..)è·å–å¯¹è±¡ï¼Œ<br/>
åªè¦å€¼åœ¨-128åˆ°127çš„èŒƒå›´å†…ï¼Œæ‹¿åˆ°çš„å°±æ˜¯ç¼“å­˜å¥½çš„å¯¹è±¡ã€‚å› æ­¤æ— è®ºæ˜¯<code>==è¿ç®—ç¬¦</code>è¿˜æ˜¯equals()æ–¹æ³•ï¼Œåªè¦å€¼ç›¸åŒï¼Œç»“æœéƒ½æ˜¯trueã€‚<br/>
è€Œå¦‚æœä½ çš„å€¼åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å¤–ï¼Œ<code>==</code>å¿…ç„¶è¿”å›falseï¼Œequals()æ–¹æ³•çš„è¿”å›å€¼ä¾å¯¹è±¡çš„å€¼è€Œå®šã€‚</p>

<h2 id="toc_5">ç»“è®º</h2>

<p>æ— è®ºå¦‚ä½•ï¼Œè¯·ä½¿ç”¨equals()æ–¹æ³•æ¯”è¾ƒå¤§å°ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/5</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Android%E5%BC%80%E5%8F%91.html'>Androidå¼€å‘</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14730873130757.html">
                
                  <h1>å¦‚ä½•åœ¨Javaä¸­é¿å…equalsæ–¹æ³•çš„éšè—é™·é˜±</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>ä»Šå¤©çœ‹èµ„æ–™æ—¶çœ‹åˆ°coolshellçš„è¿™ç¯‡æ–‡ç« ï¼Œè·ç›ŠåŒªæµ…ï¼Œæ”¶è—åˆ°æ–‡åº“é‡Œã€‚</p>

<p>è¯‘æ–‡åŸæ–‡ï¼š<a href="http://coolshell.cn/articles/1051.html">http://coolshell.cn/articles/1051.html</a><br/>
è‹±æ–‡åŸæ–‡ï¼š<a href="http://www.artima.com/lejava/articles/equality.html">http://www.artima.com/lejava/articles/equality.html</a></p>

<p><strong>è¯‘è€…æ³¨</strong> :ä½ å¯èƒ½ä¼šè§‰å¾—Javaå¾ˆç®€å•ï¼ŒObjectçš„equalså®ç°ä¹Ÿä¼šéå¸¸ç®€å•ï¼Œä½†æ˜¯äº‹å®å¹¶ä¸æ˜¯ä½ æƒ³è±¡çš„è¿™æ ·ï¼Œè€å¿ƒçš„è¯»å®Œæœ¬æ–‡ï¼Œä½ ä¼šå‘ç°ä½ å¯¹Javaäº†è§£çš„æ˜¯å¦‚æ­¤çš„å°‘ã€‚å¦‚æœè¿™ç¯‡æ–‡ç« æ˜¯ä¸€ä»½Javaç¨‹åºå‘˜çš„å…¥èŒç¬”è¯•ï¼Œé‚£ä¹ˆä¸çŸ¥é“æœ‰å¤šå°‘äººä¼šæ‰è½åˆ°è¿™æ ·çš„é™·é˜±ä¸­ã€‚åŸæ–‡è½¬è‡ª<a href="http://www.artima.com/lejava/articles/equality.html">http://www.artima.com/lejava/articles/equality.html</a> ä¸‰ä½ä½œè€…éƒ½æ˜¯ä¸åŒé¢†åŸŸçš„å¤§æ‹¿ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥ä»ä¸Šé¢è¿™ä¸ªè¿æ¥ç›´æ¥å»é˜…è¯»åŸæ–‡ã€‚</p>

<p><strong>æ‘˜è¦</strong></p>

<p>æœ¬æ–‡æè¿°é‡è½½equalsæ–¹æ³•çš„æŠ€æœ¯ï¼Œè¿™ç§æŠ€æœ¯å³ä½¿æ˜¯å…·ç°ç±»çš„å­ç±»å¢åŠ äº†å­—æ®µä¹Ÿèƒ½ä¿è¯equalè¯­ä¹‰çš„æ­£ç¡®æ€§ã€‚</p>

<p>åœ¨ã€ŠEffective Javaã€‹çš„ç¬¬8é¡¹ä¸­ï¼ŒJosh Blochæè¿°äº†å½“ç»§æ‰¿ç±»ä½œä¸ºé¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„ç­‰ä»·å…³ç³»çš„åŸºç¡€é—®é¢˜ï¼Œè¦ä¿è¯æ´¾ç”Ÿç±»çš„equalæ­£ç¡®æ€§è¯­ä¹‰æ‰€ä¼šé¢å¯¹çš„å›°éš¾ã€‚Blochè¿™æ ·å†™åˆ°ï¼š</p>

<blockquote>
<p><strong>é™¤éä½ å¿˜è®°äº†é¢å‘å¯¹è±¡æŠ½è±¡çš„å¥½å¤„ï¼Œå¦åˆ™åœ¨å½“ä½ ç»§æ‰¿ä¸€ä¸ªæ–°ç±»æˆ–åœ¨ç±»ä¸­å¢åŠ äº†ä¸€ä¸ªå€¼ç»„ä»¶æ—¶ä½ æ— æ³•åŒæ—¶ä¿è¯equalçš„è¯­ä¹‰ä¾ç„¶æ­£ç¡®</strong></p>
</blockquote>

<p>åœ¨ã€ŠProgramming in Scalaã€‹ä¸­çš„ç¬¬28ç« æ¼”ç¤ºäº†ä¸€ç§æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•å…è®¸å³ä½¿ç»§æ‰¿äº†æ–°ç±»ï¼Œå¢åŠ äº†æ–°çš„å€¼ç»„ä»¶ï¼Œequalçš„è¯­ä¹‰ä»ç„¶èƒ½å¾—åˆ°ä¿è¯ã€‚è™½ç„¶åœ¨è¿™æœ¬ä¹¦ä¸­è¿™é¡¹æŠ€æœ¯æ˜¯åœ¨ä½¿ç”¨Scalaç±»ç¯å¢ƒä¸­ï¼Œä½†æ˜¯è¿™é¡¹æŠ€æœ¯åŒæ ·å¯ä»¥åº”ç”¨äºJavaå®šä¹‰çš„ç±»ä¸­ã€‚åœ¨æœ¬æ–‡ä¸­çš„æè¿°æ¥è‡ªäºProgramming in Scalaä¸­çš„æ–‡å­—æè¿°ï¼Œä½†æ˜¯ä»£ç è¢«æˆ‘ä»scalaç¿»è¯‘æˆäº†Java</p>

<h4 id="toc_0">å¸¸è§çš„ç­‰ä»·æ–¹æ³•é™·é˜±</h4>

<p>java.lang.Object ç±»å®šä¹‰äº†equalsè¿™ä¸ªæ–¹æ³•ï¼Œå®ƒçš„å­ç±»å¯ä»¥é€šè¿‡é‡è½½æ¥è¦†ç›–å®ƒã€‚ä¸å¹¸çš„æ˜¯ï¼Œåœ¨é¢å‘å¯¹è±¡ä¸­å†™å‡ºæ­£ç¡®çš„equalsæ–¹æ³•æ˜¯éå¸¸å›°éš¾çš„ã€‚äº‹å®ä¸Šï¼Œåœ¨ç ”ç©¶äº†å¤§é‡çš„Javaä»£ç åï¼Œ2007 paperçš„ä½œè€…å¾—å‡ºäº†å¦‚ä¸‹çš„ä¸€ä¸ªç»“è®ºï¼š</p>

<blockquote>
<p>å‡ ä¹æ‰€æœ‰çš„equalsæ–¹æ³•çš„å®ç°éƒ½æ˜¯é”™è¯¯çš„ï¼</p>
</blockquote>

<p>è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºç­‰ä»·æ˜¯å’Œå¾ˆå¤šå…¶ä»–çš„äº‹ç‰©ç›¸å…³è”ã€‚ä¾‹å¦‚å…¶ä¸­ä¹‹ä¸€ï¼Œä¸€ä¸ªçš„ç±»å‹Cçš„é”™è¯¯ç­‰ä»·æ–¹æ³•å¯èƒ½æ„å‘³ç€ä½ æ— æ³•å°†è¿™ä¸ªç±»å‹Cçš„å¯¹è±¡å¯ä¿¡èµ–çš„æ”¾å…¥åˆ°å®¹å™¨ä¸­ã€‚æ¯”å¦‚è¯´ï¼Œä½ æœ‰ä¸¤ä¸ªå…ƒç´ elem1å’Œelem2ä»–ä»¬éƒ½æ˜¯ç±»å‹Cçš„å¯¹è±¡ï¼Œå¹¶ä¸”ä»–ä»¬æ˜¯ç›¸ç­‰ï¼Œå³<code>elem1.equals(elm2)</code>è¿”å›tureã€‚ä½†æ˜¯ï¼Œåªè¦è¿™ä¸ªequalsæ–¹æ³•æ˜¯é”™è¯¯çš„å®ç°ï¼Œé‚£ä¹ˆä½ å°±æœ‰å¯èƒ½ä¼šçœ‹è§å¦‚ä¸‹çš„ä¸€äº›è¡Œä¸ºï¼š</p>

<pre><code>Set hashSet&lt;C&gt; = new java.util.HashSet&lt;C&gt;();
hashSet.add(elem1);
hashSet.contains(elem2);    // returns false!&lt;/pre&gt;
</code></pre>

<p>å½“equalsé‡è½½æ—¶ï¼Œè¿™é‡Œæœ‰4ä¸ªä¼šå¼•å‘equalsè¡Œä¸ºä¸ä¸€è‡´çš„å¸¸è§é™·é˜±ï¼š</p>

<ol>
<li> å®šä¹‰äº†é”™è¯¯çš„equalsæ–¹æ³•ç­¾å(signature) Defining equals with the wrong signature.</li>
<li> é‡è½½äº†equalsçš„ä½†æ²¡æœ‰åŒæ—¶é‡è½½hashCodeçš„æ–¹æ³•ã€‚ Changing equals without also changing hashCode.</li>
<li> å»ºç«‹åœ¨ä¼šå˜åŒ–å­—åŸŸä¸Šçš„equalså®šä¹‰ã€‚ Defining equals in terms of mutable fields.</li>
<li> ä¸æ»¡è¶³ç­‰ä»·å…³ç³»çš„equalsé”™è¯¯å®šä¹‰ Failing to define equals as an equivalence relation.</li>
</ol>

<p>åœ¨å‰©ä¸‹çš„ç« èŠ‚ä¸­æˆ‘ä»¬å°†ä¾æ¬¡è®¨è®ºè¿™4ä¸­é™·é˜±ã€‚</p>

<h4 id="toc_1">é™·é˜±1ï¼šå®šä¹‰é”™è¯¯equalsæ–¹æ³•ç­¾å(signature)</h4>

<p>è€ƒè™‘ä¸ºä¸‹é¢è¿™ä¸ªç®€å•ç±»Pointå¢åŠ ä¸€ä¸ªç­‰ä»·æ€§æ–¹æ³•ï¼š</p>

<pre><code>public class Point {

    private final int x;
    private final int y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    // ...
}
</code></pre>

<p>çœ‹ä¸Šå»éå¸¸æ˜æ˜¾ï¼Œä½†æ˜¯æŒ‰ç…§è¿™ç§æ–¹å¼æ¥å®šä¹‰equalså°±æ˜¯é”™è¯¯çš„ã€‚</p>

<pre><code>// An utterly wrong definition of equals
public boolean equals(Point other) {
  return (this.getX() == other.getX() &amp;&amp; this.getY() == other.getY());
}
</code></pre>

<p>è¿™ä¸ªæ–¹æ³•æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿåˆçœ‹èµ·æ¥ï¼Œå®ƒå·¥ä½œçš„éå¸¸å®Œç¾ï¼š</p>

<pre><code>Point p1 = new Point(1, 2);
Point p2 = new Point(1, 2);

Point q = new Point(2, 3);

System.out.println(p1.equals(p2)); // prints true

System.out.println(p1.equals(q)); // prints false
</code></pre>

<p>ç„¶è€Œï¼Œå½“æˆ‘ä»¬ä¸€æ—¦æŠŠè¿™ä¸ªPointç±»çš„å®ä¾‹æ”¾å…¥åˆ°ä¸€ä¸ªå®¹å™¨ä¸­é—®é¢˜å°±å‡ºç°äº†ï¼š</p>

<pre><code>import java.util.HashSet;

HashSet&lt;Point&gt; coll = new HashSet&lt;Point&gt;();
coll.add(p1);

System.out.println(coll.contains(p2)); // prints false
</code></pre>

<p>ä¸ºä»€ä¹ˆcollä¸­æ²¡æœ‰åŒ…å«p2å‘¢ï¼Ÿç”šè‡³æ˜¯p1ä¹Ÿè¢«åŠ åˆ°é›†åˆé‡Œé¢ï¼Œp1å’Œp2æ˜¯æ˜¯ç­‰ä»·çš„å¯¹è±¡å—ï¼Ÿåœ¨ä¸‹é¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å…¶ä¸­çš„ä¸€äº›åŸå› ï¼Œå®šä¹‰p2aæ˜¯ä¸€ä¸ªæŒ‡å‘p2çš„å¯¹è±¡ï¼Œä½†æ˜¯p2açš„ç±»å‹æ˜¯Objectè€ŒéPointç±»å‹ï¼š</p>

<pre><code>Object p2a = p2;
</code></pre>

<p>ç°åœ¨æˆ‘ä»¬é‡å¤ç¬¬ä¸€ä¸ªæ¯”è¾ƒï¼Œä½†æ˜¯ä¸å†ä½¿ç”¨p2è€Œæ˜¯p2a,æˆ‘ä»¬å°†ä¼šå¾—åˆ°å¦‚ä¸‹çš„ç»“æœï¼š</p>

<pre><code>System.out.println(p1.equals(p2a)); // prints false
</code></pre>

<p>åˆ°åº•æ˜¯é‚£é‡Œå‡ºäº†äº†é—®é¢˜ï¼Ÿäº‹å®ä¸Šï¼Œä¹‹å‰æ‰€ç»™å‡ºçš„equalsç‰ˆæœ¬å¹¶æ²¡æœ‰è¦†ç›–Objectç±»çš„equalsæ–¹æ³•ï¼Œå› ä¸ºä»–çš„ç±»å‹ä¸åŒã€‚ä¸‹é¢æ˜¯Objectçš„equalsæ–¹æ³•çš„å®šä¹‰</p>

<pre><code>public boolean equals(Object other)
</code></pre>

<p>å› ä¸ºPointç±»ä¸­çš„equalsæ–¹æ³•ä½¿ç”¨çš„æ˜¯ä»¥Pointç±»è€ŒéObjectç±»åšä¸ºå‚æ•°ï¼Œå› æ­¤å®ƒå¹¶æ²¡æœ‰è¦†ç›–Objectä¸­çš„equalsæ–¹æ³•ã€‚è€Œæ˜¯ä¸€ç§å˜åŒ–äº†çš„é‡è½½ã€‚åœ¨Javaä¸­é‡è½½è¢«è§£æä¸ºé™æ€çš„å‚æ•°ç±»å‹è€Œéè¿è¡ŒæœŸçš„ç±»å‹ï¼Œå› æ­¤å½“é™æ€å‚æ•°ç±»å‹æ˜¯Point,Pointçš„equalsæ–¹æ³•å°±è¢«è°ƒç”¨ã€‚ç„¶è€Œå½“é™æ€å‚æ•°ç±»å‹æ˜¯Objectæ—¶ï¼ŒObjectç±»çš„equalså°±è¢«è°ƒç”¨ã€‚å› ä¸ºè¿™ä¸ªæ–¹æ³•å¹¶æ²¡æœ‰è¢«è¦†ç›–ï¼Œå› æ­¤å®ƒä»ç„¶æ˜¯å®ç°æˆæ¯”è¾ƒå¯¹è±¡æ ‡ç¤ºã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè™½ç„¶p1å’Œp2aå…·æœ‰åŒæ ·çš„x,yå€¼ï¼Œâ€p1.equals(p2a)â€ä»ç„¶è¿”å›äº†falseã€‚è¿™ä¹Ÿæ˜¯ä¼šä»€ä¹ˆHasSetçš„containsæ–¹æ³•è¿”å›falseçš„åŸå› ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•æ“ä½œçš„æ˜¯æ³›å‹ï¼Œä»–è°ƒç”¨çš„æ˜¯ä¸€èˆ¬åŒ–çš„Objectä¸Šequalsæ–¹æ³•è€ŒéPointç±»ä¸Šå˜åŒ–äº†çš„é‡è½½æ–¹æ³•equals</p>

<p>ä¸€ä¸ªæ›´å¥½ä½†ä¸å®Œç¾çš„equalsæ–¹æ³•å®šä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code>// A better definition, but still not perfect
@Override public boolean equals(Object other) {
    boolean result = false;
    if (other instanceof Point) {
        Point that = (Point) other;
        result = (this.getX() == that.getX() &amp;&amp; this.getY() == that.getY());
    }
    return result;
}
</code></pre>

<p>ç°åœ¨equalsæœ‰äº†æ­£ç¡®çš„ç±»å‹ï¼Œå®ƒä½¿ç”¨äº†ä¸€ä¸ªObjectç±»å‹çš„å‚æ•°å’Œä¸€ä¸ªè¿”å›å¸ƒå°”å‹çš„ç»“æœã€‚è¿™ä¸ªæ–¹æ³•çš„å®ç°ä½¿ç”¨instanceofæ“ä½œå’Œåšäº†ä¸€ä¸ªé€ å‹ã€‚å®ƒé¦–å…ˆæ£€æŸ¥è¿™ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªPointç±»ï¼Œå¦‚æœæ˜¯ï¼Œä»–å°±æ¯”è¾ƒä¸¤ä¸ªç‚¹çš„åæ ‡å¹¶è¿”å›ç»“æœï¼Œå¦åˆ™è¿”å›falseã€‚</p>

<h4 id="toc_2">é™·é˜±2ï¼šé‡è½½äº†equalsçš„ä½†æ²¡æœ‰åŒæ—¶é‡è½½hashCodeçš„æ–¹æ³•</h4>

<p>å¦‚æœä½ ä½¿ç”¨ä¸Šä¸€ä¸ªå®šä¹‰çš„Pointç±»è¿›è¡Œp1å’Œp2açš„åå¤æ¯”è¾ƒï¼Œä½ éƒ½ä¼šå¾—åˆ°ä½ é¢„æœŸçš„trueçš„ç»“æœã€‚ä½†æ˜¯å¦‚æœä½ å°†è¿™ä¸ªç±»å¯¹è±¡æ”¾å…¥åˆ°HashSet.contains()æ–¹æ³•ä¸­æµ‹è¯•ï¼Œä½ å°±æœ‰å¯èƒ½ä»ç„¶å¾—åˆ°falseçš„ç»“æœï¼š</p>

<pre><code>Point p1 = new Point(1, 2);
Point p2 = new Point(1, 2);

HashSet&lt;Point&gt; coll = new HashSet&lt;Point&gt;();
coll.add(p1);

System.out.println(coll.contains(p2)); // æ‰“å° false (æœ‰å¯èƒ½)
</code></pre>

<p>äº‹å®ä¸Šï¼Œè¿™ä¸ªä¸ªç»“æœä¸æ˜¯100%çš„falseï¼Œä½ ä¹Ÿå¯èƒ½æœ‰è¿”å›tureçš„ç»å†ã€‚å¦‚æœä½ å¾—åˆ°çš„ç»“æœæ˜¯trueçš„è¯ï¼Œé‚£ä¹ˆä½ è¯•è¯•å…¶ä»–çš„åæ ‡å€¼ï¼Œæœ€ç»ˆä½ ä¸€å®šä¼šå¾—åˆ°ä¸€ä¸ªåœ¨é›†åˆä¸­ä¸åŒ…å«çš„ç»“æœã€‚å¯¼è‡´è¿™ä¸ªç»“æœçš„åŸå› æ˜¯Pointé‡è½½äº†equalså´æ²¡æœ‰é‡è½½hashCodeã€‚</p>

<p>æ³¨æ„ä¸Šé¢ä¾‹å­çš„çš„å®¹å™¨æ˜¯ä¸€ä¸ªHashSetï¼Œè¿™å°±æ„å‘³ç€å®¹å™¨ä¸­çš„å…ƒç´ æ ¹æ®ä»–ä»¬çš„å“ˆå¸Œç è¢«è¢«æ”¾å…¥åˆ°â€å“ˆå¸Œæ¡¶ hash bucketsâ€ä¸­ã€‚containsæ–¹æ³•é¦–å…ˆæ ¹æ®å“ˆå¸Œç åœ¨å“ˆå¸Œæ¡¶ä¸­æŸ¥æ‰¾ï¼Œç„¶åè®©æ¡¶ä¸­çš„æ‰€æœ‰å…ƒç´ å’Œæ‰€ç»™çš„å‚æ•°è¿›è¡Œæ¯”è¾ƒã€‚ç°åœ¨ï¼Œè™½ç„¶æœ€åä¸€ä¸ªPointç±»çš„ç‰ˆæœ¬é‡å®šä¹‰äº†equalsæ–¹æ³•ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰åŒæ—¶é‡å®šä¹‰hashCodeã€‚å› æ­¤ï¼ŒhashCodeä»ç„¶æ˜¯Objectç±»çš„é‚£ä¸ªç‰ˆæœ¬ï¼Œå³ï¼šæ‰€åˆ†é…å¯¹è±¡çš„ä¸€ä¸ªåœ°å€çš„å˜æ¢ã€‚æ‰€ä»¥p1å’Œp2çš„å“ˆå¸Œç ç†æ‰€å½“ç„¶çš„ä¸åŒäº†ï¼Œç”šè‡³æ˜¯å³æ—¶è¿™ä¸¤ä¸ªç‚¹çš„åæ ‡å®Œå…¨ç›¸åŒã€‚ä¸åŒçš„å“ˆå¸Œç å¯¼è‡´ä»–ä»¬å…·æœ‰æé«˜çš„å¯èƒ½æ€§è¢«æ”¾å…¥åˆ°é›†åˆä¸­ä¸åŒçš„å“ˆå¸Œæ¡¶ä¸­ã€‚containsæ–¹æ³•å°†ä¼šå»æ‰¾p2çš„å“ˆå¸Œç å¯¹åº”å“ˆå¸Œæ¡¶ä¸­çš„åŒ¹é…å…ƒç´ ã€‚ä½†æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œp1ä¸€å®šæ˜¯åœ¨å¦å¤–ä¸€ä¸ªæ¡¶ä¸­ï¼Œå› æ­¤ï¼Œp2æ°¸è¿œæ‰¾ä¸åˆ°p1è¿›è¡ŒåŒ¹é…ã€‚å½“ç„¶p2å’Œp2ä¹Ÿå¯èƒ½å¶å°”ä¼šè¢«æ”¾å…¥åˆ°ä¸€ä¸ªæ¡¶ä¸­ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œcontainsçš„ç»“æœå°±ä¸ºtrueäº†ã€‚</p>

<p>æœ€æ–°ä¸€ä¸ªPointç±»å®ç°çš„é—®é¢˜æ˜¯ï¼Œå®ƒçš„å®ç°è¿èƒŒäº†ä½œä¸ºObjectç±»çš„å®šä¹‰çš„hashCodeçš„è¯­ä¹‰ã€‚</p>

<blockquote>
<p>å¦‚æœä¸¤ä¸ªå¯¹è±¡æ ¹æ®equals(Object)æ–¹æ³•æ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸¤ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨hashCodeæ–¹æ³•åº”è¯¥äº§ç”ŸåŒæ ·çš„å€¼</p>
</blockquote>

<p>äº‹å®ä¸Šï¼Œåœ¨Javaä¸­ï¼ŒhashCodeå’Œequalséœ€è¦ä¸€èµ·è¢«é‡å®šä¹‰æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„ã€‚æ­¤å¤–ï¼ŒhashCodeåªå¯ä»¥ä¾èµ–äºequalsä¾èµ–çš„åŸŸæ¥äº§ç”Ÿå€¼ã€‚å¯¹äºPointè¿™ä¸ªç±»æ¥è¯´ï¼Œä¸‹é¢çš„çš„hashCodeå®šä¹‰æ˜¯ä¸€ä¸ªéå¸¸åˆé€‚çš„å®šä¹‰ã€‚</p>

<pre><code>public class Point {

    private final int x;
    private final int y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    @Override public boolean equals(Object other) {
        boolean result = false;
        if (other instanceof Point) {
            Point that = (Point) other;
            result = (this.getX() == that.getX() &amp;&amp; this.getY() == that.getY());
        }
        return result;
    }

    @Override public int hashCode() {
        return (41 * (41 + getX()) + getY());
    }

}
</code></pre>

<p>è¿™åªæ˜¯hashCodeä¸€ä¸ªå¯èƒ½çš„å®ç°ã€‚xåŸŸåŠ ä¸Šå¸¸é‡41åçš„ç»“æœå†ä¹˜ä¸41å¹¶å°†ç»“æœåœ¨åŠ ä¸ŠyåŸŸçš„å€¼ã€‚è¿™æ ·åšå°±å¯ä»¥ä»¥ä½æˆæœ¬çš„è¿è¡Œæ—¶é—´å’Œä½æˆæœ¬ä»£ç å¤§å°å¾—åˆ°ä¸€ä¸ªå“ˆå¸Œç çš„åˆç†çš„åˆ†å¸ƒ(<strong>è¯‘è€…æ³¨ï¼š</strong>æ€§ä»·æ¯”ç›¸å¯¹è¾ƒé«˜çš„åšæ³•)ã€‚</p>

<p>å¢åŠ hashCodeæ–¹æ³•é‡è½½ä¿®æ­£äº†å®šä¹‰ç±»ä¼¼Pointç±»ç­‰ä»·æ€§çš„é—®é¢˜ã€‚ç„¶è€Œï¼Œå…³äºç±»çš„ç­‰ä»·æ€§ä»ç„¶æœ‰å…¶ä»–çš„é—®é¢˜ç‚¹å¾…å‘ç°ã€‚</p>

<h4 id="toc_3">é™·é˜±3ï¼šå»ºç«‹åœ¨ä¼šå˜åŒ–å­—æ®µä¸Šçš„equalså®šä¹‰</h4>

<p>è®©æˆ‘ä»¬åœ¨Pointç±»åšä¸€ä¸ªéå¸¸å¾®å°çš„å˜åŒ–</p>

<pre><code>public class Point {

    private int x;
    private int y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    public void setX(int x) { // Problematic
        this.x = x;
    }

    public void setY(int y) {
        this.y = y;
    }

    @Override public boolean equals(Object other) {
        boolean result = false;
        if (other instanceof Point) {
            Point that = (Point) other;
            result = (this.getX() == that.getX() &amp;&amp; this.getY() == that.getY());
        }
        return result;
    }

    @Override public int hashCode() {
        return (41 * (41 + getX()) + getY());
    }
}
</code></pre>

<p>å”¯ä¸€çš„ä¸åŒæ˜¯xå’ŒyåŸŸä¸å†æ˜¯finalï¼Œå¹¶ä¸”ä¸¤ä¸ªsetæ–¹æ³•è¢«å¢åŠ åˆ°ç±»ä¸­æ¥ï¼Œå¹¶å…è®¸å®¢æˆ·æ”¹å˜xå’Œyçš„å€¼ã€‚equalså’ŒhashCodeè¿™ä¸ªæ–¹æ³•çš„å®šä¹‰ç°åœ¨æ˜¯åŸºäºåœ¨è¿™ä¸¤ä¸ªä¼šå‘ç”Ÿå˜åŒ–çš„åŸŸä¸Šï¼Œå› æ­¤å½“ä»–ä»¬çš„åŸŸçš„å€¼æ”¹å˜æ—¶ï¼Œç»“æœä¹Ÿå°±è·Ÿç€æ”¹å˜ã€‚å› æ­¤ä¸€æ—¦ä½ å°†è¿™ä¸ªpointå¯¹è±¡æ”¾å…¥åˆ°é›†åˆä¸­ä½ å°†ä¼šçœ‹åˆ°éå¸¸ç¥å¥‡çš„æ•ˆæœã€‚</p>

<pre><code>Point p = new Point(1, 2);

HashSet&lt;Point&gt; coll = new HashSet&lt;Point&gt;();
coll.add(p);

System.out.println(coll.contains(p)); // æ‰“å° true
</code></pre>

<p>ç°åœ¨å¦‚æœä½ æ”¹å˜pä¸­çš„ä¸€ä¸ªåŸŸï¼Œè¿™ä¸ªé›†åˆä¸­è¿˜ä¼šåŒ…å«pointå—ï¼Œæˆ‘ä»¬å°†æ‹­ç›®ä»¥å¾…ã€‚</p>

<pre><code>p.setX(p.getX() + 1);

System.out.println(coll.contains(p)); // (æœ‰å¯èƒ½)æ‰“å° false
</code></pre>

<p>çœ‹èµ·æ¥éå¸¸çš„å¥‡æ€ªã€‚på»é‚£é‡Œå»äº†ï¼Ÿå¦‚æœä½ é€šè¿‡é›†åˆçš„è¿­ä»£å™¨æ¥æ£€æŸ¥pæ˜¯å¦åŒ…å«ï¼Œä½ å°†ä¼šå¾—åˆ°æ›´å¥‡æ€ªçš„ç»“æœã€‚</p>

<pre><code>Iterator&lt;Point&gt; it = coll.iterator();
boolean containedP = false;
while (it.hasNext()) {
    Point nextP = it.next();
    if (nextP.equals(p)) {
        containedP = true;
        break;
    }
}

System.out.println(containedP); // æ‰“å° true
</code></pre>

<p>ç»“æœæ˜¯ï¼Œé›†åˆä¸­ä¸åŒ…å«pï¼Œä½†æ˜¯påœ¨é›†åˆçš„å…ƒç´ ä¸­ï¼åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼å½“ç„¶ï¼Œæ‰€æœ‰çš„è¿™ä¸€åˆ‡éƒ½æ˜¯åœ¨xåŸŸçš„ä¿®æ”¹åæ‰å‘ç”Ÿçš„ï¼Œpæœ€ç»ˆçš„çš„hashCodeæ˜¯åœ¨é›†åˆcollé”™è¯¯çš„å“ˆå¸Œæ¡¶ä¸­ã€‚å³ï¼ŒåŸå§‹å“ˆå¸Œæ¡¶ä¸å†æœ‰å…¶æ–°å€¼å¯¹åº”çš„å“ˆå¸Œç ã€‚æ¢å¥è¯è¯´ï¼Œpå·²ç»åœ¨é›†åˆcollçš„æ˜¯è§†é‡èŒƒå›´ä¹‹å¤–ï¼Œè™½ç„¶ä»–ä»ç„¶å±äºcollçš„å…ƒç´ ã€‚</p>

<p>ä»è¿™ä¸ªä¾‹å­æ‰€å¾—åˆ°çš„æ•™è®­æ˜¯ï¼Œå½“equalså’ŒhashCodeä¾èµ–äºä¼šå˜åŒ–çš„çŠ¶æ€æ—¶ï¼Œé‚£ä¹ˆå°±ä¼šç»™ç”¨æˆ·å¸¦æ¥é—®é¢˜ã€‚å¦‚æœè¿™æ ·çš„å¯¹è±¡è¢«æ”¾å…¥åˆ°é›†åˆä¸­ï¼Œç”¨æˆ·å¿…é¡»å°å¿ƒï¼Œä¸è¦ä¿®æ”¹è¿™äº›è¿™äº›å¯¹è±¡æ‰€ä¾èµ–çš„çŠ¶æ€ï¼Œè¿™æ˜¯ä¸€ä¸ªå°é™·é˜±ã€‚å¦‚æœä½ éœ€è¦æ ¹æ®å¯¹è±¡å½“å‰çš„çŠ¶æ€è¿›è¡Œæ¯”è¾ƒçš„è¯ï¼Œä½ åº”è¯¥ä¸è¦å†é‡å®šä¹‰equalsï¼Œåº”è¯¥èµ·å…¶ä»–çš„æ–¹æ³•åå­—è€Œä¸æ˜¯equalsã€‚å¯¹äºæˆ‘ä»¬çš„Pointç±»çš„æœ€åçš„å®šä¹‰ï¼Œæˆ‘ä»¬æœ€å¥½çœç•¥æ‰hashCodeçš„é‡è½½ï¼Œå¹¶å°†æ¯”è¾ƒçš„æ–¹æ³•åå‘½åä¸ºequalsContentsï¼Œæˆ–å…¶ä»–ä¸åŒäºequalsçš„åå­—ã€‚é‚£ä¹ˆPointå°†ä¼šç»§æ‰¿åŸæ¥é»˜è®¤çš„equalså’ŒhashCodeçš„å®ç°ï¼Œå› æ­¤å½“æˆ‘ä»¬ä¿®æ”¹äº†xåŸŸåpä¾ç„¶ä¼šå‘†åœ¨å…¶åŸæ¥åœ¨å®¹å™¨ä¸­åº”è¯¥åœ¨ä½ç½®ã€‚</p>

<h4 id="toc_4">é™·é˜±4ï¼šä¸æ»¡è¶³ç­‰ä»·å…³ç³»çš„equalsé”™è¯¯å®šä¹‰</h4>

<p>Objectä¸­çš„equalsçš„è§„èŒƒé˜è¿°äº†equalsæ–¹æ³•å¿…é¡»å®ç°åœ¨énullå¯¹è±¡ä¸Šçš„ç­‰ä»·å…³ç³»ï¼š</p>

<ul>
<li>  è‡ªååŸåˆ™ï¼šå¯¹äºä»»ä½•énullå€¼X,è¡¨è¾¾å¼x.equals(x)æ€»è¿”å›trueã€‚</li>
<li>  ç­‰ä»·æ€§ï¼šå¯¹äºä»»ä½•éç©ºå€¼xå’Œyï¼Œé‚£ä¹ˆå½“ä¸”ä»…å½“y.equals(x)è¿”å›çœŸæ—¶ï¼Œx.equals(y)è¿”å›çœŸã€‚</li>
<li>  ä¼ é€’æ€§ï¼šå¯¹äºä»»ä½•éç©ºå€¼x,y,å’Œzï¼Œå¦‚æœx.equals(y)è¿”å›çœŸï¼Œä¸”y.equals(z)ä¹Ÿè¿”å›çœŸï¼Œé‚£ä¹ˆx.equals(z)ä¹Ÿåº”è¯¥è¿”å›çœŸã€‚</li>
<li>  ä¸€è‡´æ€§ï¼šå¯¹äºéç©ºx,yï¼Œå¤šæ¬¡è°ƒç”¨x.equals(y)åº”è¯¥ä¸€è‡´çš„è¿”å›çœŸæˆ–å‡ã€‚æä¾›ç»™equalsæ–¹æ³•æ¯”è¾ƒä½¿ç”¨çš„ä¿¡æ¯ä¸åº”è¯¥åŒ…å«æ”¹è¿‡çš„ä¿¡æ¯ã€‚</li>
<li>  å¯¹äºä»»ä½•éç©ºå€¼x,x.equals(null)åº”è¯¥æ€»è¿”å›false.</li>
</ul>

<p>Pointç±»çš„equalså®šä¹‰å·²ç»è¢«å¼€å‘æˆäº†è¶³å¤Ÿæ»¡è¶³equalsè§„èŒƒçš„å®šä¹‰ã€‚ç„¶è€Œï¼Œå½“è€ƒè™‘åˆ°ç»§æ‰¿çš„æ—¶å€™ï¼Œäº‹æƒ…å°±å¼€å§‹å˜å¾—éå¸¸å¤æ‚èµ·æ¥ã€‚æ¯”å¦‚è¯´æœ‰ä¸€ä¸ªPointçš„å­ç±»ColoredPointï¼Œå®ƒæ¯”Pointå¤šå¢åŠ äº†ä¸€ä¸ªç±»å‹æ˜¯Colorçš„coloråŸŸã€‚å‡è®¾Colorè¢«å®šä¹‰ä¸ºä¸€ä¸ªæšä¸¾ç±»å‹ï¼š</p>

<pre><code>public enum Color {
    RED, ORANGE, YELLOW, GREEN, BLUE, INDIGO, VIOLET;
}
</code></pre>

<p>ColoredPointé‡è½½äº†equalsæ–¹æ³•ï¼Œå¹¶è€ƒè™‘åˆ°æ–°åŠ å…¥coloråŸŸï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>public class ColoredPoint extends Point { // Problem: equals not symmetric

    private final Color color;

    public ColoredPoint(int x, int y, Color color) {
        super(x, y);
        this.color = color;
    }

    @Override public boolean equals(Object other) {
        boolean result = false;
        if (other instanceof ColoredPoint) {
            ColoredPoint that = (ColoredPoint) other;
            result = (this.color.equals(that.color) &amp;&amp; super.equals(that));
        }
        return result;
    }
}
</code></pre>

<p>è¿™æ˜¯å¾ˆå¤šç¨‹åºå‘˜éƒ½æœ‰å¯èƒ½å†™æˆçš„ä»£ç ã€‚æ³¨æ„åœ¨æœ¬ä¾‹ä¸­ï¼Œç±»ColoredPointedä¸éœ€è¦é‡è½½hashCodeï¼Œå› ä¸ºæ–°çš„ColoredPointç±»ä¸Šçš„equalså®šä¹‰ï¼Œä¸¥æ ¼çš„é‡è½½äº†Pointä¸Šequalsçš„å®šä¹‰ã€‚hashCodeçš„è§„èŒƒä»ç„¶æ˜¯æœ‰æ•ˆï¼Œå¦‚æœä¸¤ä¸ªç€è‰²ç‚¹(colored point)ç›¸ç­‰ï¼Œå…¶åæ ‡å¿…å®šç›¸ç­‰ï¼Œå› æ­¤å®ƒçš„hashCodeä¹Ÿä¿è¯äº†å…·æœ‰åŒæ ·çš„å€¼ã€‚</p>

<p>å¯¹äºColoredPointç±»è‡ªèº«å¯¹è±¡çš„æ¯”è¾ƒæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨ColoredPointå’ŒPointæ··åˆè¿›è¡Œæ¯”è¾ƒå°±è¦å‡ºç°é—®é¢˜ã€‚</p>

<pre><code>Point p = new Point(1, 2);

ColoredPoint cp = new ColoredPoint(1, 2, Color.RED);

System.out.println(p.equals(cp)); // æ‰“å°çœŸ true

System.out.println(cp.equals(p)); // æ‰“å°å‡ false
</code></pre>

<p>â€œpç­‰ä»·äºcpâ€çš„æ¯”è¾ƒè¿™ä¸ªè°ƒç”¨çš„æ˜¯å®šä¹‰åœ¨Pointç±»ä¸Šçš„equalsæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•åªè€ƒè™‘ä¸¤ä¸ªç‚¹çš„åæ ‡ã€‚å› æ­¤æ¯”è¾ƒè¿”å›çœŸã€‚åœ¨å¦å¤–ä¸€æ–¹é¢ï¼Œâ€œcpç­‰ä»·äºpâ€çš„æ¯”è¾ƒè¿™ä¸ªè°ƒç”¨çš„æ˜¯å®šä¹‰åœ¨ColoredPointç±»ä¸Šçš„equalsæ–¹æ³•ï¼Œè¿”å›çš„ç»“æœå´æ˜¯falseï¼Œè¿™æ˜¯å› ä¸ºpä¸æ˜¯ColoredPointï¼Œæ‰€ä»¥equalsè¿™ä¸ªå®šä¹‰è¿èƒŒäº†å¯¹ç§°æ€§ã€‚</p>

<p>è¿èƒŒå¯¹ç§°æ€§å¯¹äºé›†åˆæ¥è¯´å°†å¯¼è‡´ä¸å¯ä»¥é¢„æœŸçš„åæœï¼Œä¾‹å¦‚ï¼š</p>

<pre><code>Set&lt;Point&gt; hashSet1 = new java.util.HashSet&lt;Point&gt;();
hashSet1.add(p);
System.out.println(hashSet1.contains(cp));    // æ‰“å° false

Set&lt;Point&gt; hashSet2 = new java.util.HashSet&lt;Point&gt;();
hashSet2.add(cp);
System.out.println(hashSet2.contains(p));    // æ‰“å° true
</code></pre>

<p>å› æ­¤è™½ç„¶på’Œcpæ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯containsæµ‹è¯•ä¸­ä¸€ä¸ªè¿”å›æˆåŠŸï¼Œå¦å¤–ä¸€ä¸ªå´è¿”å›å¤±è´¥ã€‚</p>

<p>ä½ å¦‚ä½•ä¿®æ”¹equalsçš„å®šä¹‰ï¼Œæ‰èƒ½ä½¿å¾—è¿™ä¸ªæ–¹æ³•æ»¡è¶³å¯¹ç§°æ€§ï¼Ÿæœ¬è´¨ä¸Šè¯´æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä½ å¯ä»¥ä½¿å¾—è¿™ç§å…³ç³»å˜å¾—æ›´ä¸€èˆ¬åŒ–æˆ–æ›´ä¸¥æ ¼ã€‚æ›´ä¸€èˆ¬åŒ–çš„æ„æ€æ˜¯è¿™ä¸€å¯¹å¯¹è±¡ï¼Œaå’Œbï¼Œè¢«ç”¨äºè¿›è¡Œå¯¹æ¯”ï¼Œæ— è®ºæ˜¯aæ¯”bè¿˜æ˜¯bæ¯”a éƒ½è¿”å›trueï¼Œä¸‹é¢æ˜¯ä»£ç ï¼š</p>

<pre><code>public class ColoredPoint extends Point { // Problem: equals not transitive

    private final Color color;

    public ColoredPoint(int x, int y, Color color) {
        super(x, y);
        this.color = color;
    }

    @Override public boolean equals(Object other) {
        boolean result = false;
        if (other instanceof ColoredPoint) {
            ColoredPoint that = (ColoredPoint) other;
            result = (this.color.equals(that.color) &amp;&amp; super.equals(that));
        }
        else if (other instanceof Point) {
            Point that = (Point) other;
            result = that.equals(this);
        }
        return result;
    }
}
</code></pre>

<p>åœ¨ColoredPointä¸­çš„equalsçš„æ–°å®šä¹‰æ¯”è€å®šä¹‰ä¸­æ£€æŸ¥äº†æ›´å¤šçš„æƒ…å†µ:å¦‚æœå¯¹è±¡æ˜¯ä¸€ä¸ªPointå¯¹è±¡è€Œä¸æ˜¯ColoredPointï¼Œæ–¹æ³•å°±è½¬å˜ä¸ºPointç±»çš„equalsæ–¹æ³•è°ƒç”¨ã€‚è¿™ä¸ªæ‰€å¸Œæœ›è¾¾åˆ°çš„æ•ˆæœå°±æ˜¯equalsçš„å¯¹ç§°æ€§ï¼Œä¸ç®¡â€cp.equals(p)â€è¿˜æ˜¯â€p.equals(cp)â€çš„ç»“æœéƒ½æ˜¯trueã€‚ç„¶è€Œè¿™ç§æ–¹æ³•ï¼Œequalsçš„è§„èŒƒè¿˜æ˜¯è¢«ç ´åäº†ï¼Œç°åœ¨çš„é—®é¢˜æ˜¯è¿™ä¸ªæ–°ç­‰ä»·æ€§ä¸æ»¡è¶³ä¼ é€’æ€§ã€‚è€ƒè™‘ä¸‹é¢çš„ä¸€æ®µä»£ç å®ä¾‹ï¼Œå®šä¹‰äº†ä¸€ä¸ªç‚¹å’Œè¿™ä¸ªç‚¹ä¸Šä¸Šä¸¤ç§ä¸åŒé¢œè‰²ç‚¹ï¼š</p>

<pre><code>ColoredPoint redP = new ColoredPoint(1, 2, Color.RED);
ColoredPoint blueP = new ColoredPoint(1, 2, Color.BLUE);
</code></pre>

<p>redPç­‰ä»·äºpï¼Œpç­‰ä»·äºblueP</p>

<pre><code>System.out.println(redP.equals(p)); // prints true

System.out.println(p.equals(blueP)); // prints true
</code></pre>

<p>ç„¶è€Œï¼Œå¯¹æ¯”redPå’ŒbluePçš„ç»“æœæ˜¯false:</p>

<pre><code>System.out.println(redP.equals(blueP)); // æ‰“å° false
</code></pre>

<p>å› æ­¤ï¼Œequalsçš„ä¼ é€’æ€§å°±è¢«è¿èƒŒäº†ã€‚</p>

<p>ä½¿equalsçš„å…³ç³»æ›´ä¸€èˆ¬åŒ–ä¼¼ä¹ä¼šå°†æˆ‘ä»¬å¸¦å…¥åˆ°æ­»èƒ¡åŒã€‚æˆ‘ä»¬åº”è¯¥é‡‡ç”¨æ›´ä¸¥æ ¼åŒ–çš„æ–¹æ³•ã€‚ä¸€ç§æ›´ä¸¥æ ¼åŒ–çš„equalsæ–¹æ³•æ˜¯è®¤ä¸ºä¸åŒç±»çš„å¯¹è±¡æ˜¯ä¸åŒçš„ã€‚è¿™ä¸ªå¯ä»¥é€šè¿‡ä¿®æ”¹Pointç±»å’ŒColoredPointç±»çš„equalsæ–¹æ³•æ¥è¾¾åˆ°ã€‚ä½ èƒ½å¢åŠ é¢å¤–çš„æ¯”è¾ƒæ¥æ£€æŸ¥æ˜¯å¦è¿è¡Œæ€çš„è¿™ä¸ªPointç±»å’Œé‚£ä¸ªPointç±»æ˜¯åŒä¸€ä¸ªç±»ï¼Œå°±åƒå¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ä¸€æ ·ï¼š</p>

<pre><code>// A technically valid, but unsatisfying, equals method
public class Point {

    private final int x;
    private final int y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    @Override public boolean equals(Object other) {
        boolean result = false;
        if (other instanceof Point) {
            Point that = (Point) other;
            result = (this.getX() == that.getX() &amp;&amp; this.getY() == that.getY()
                    &amp;&amp; this.getClass().equals(that.getClass()));
        }
        return result;
    }

    @Override public int hashCode() {
        return (41 * (41 + getX()) + getY());
    }
}
</code></pre>

<p>ä½ ç°åœ¨å¯ä»¥å°†ColoredPointç±»çš„equalså®ç°ç”¨å›åˆšæ‰é‚£ä¸ªä¸æ»¡è¶³å¯¹ç§°æ€§è¦çš„equalså®ç°äº†ã€‚</p>

<pre><code>public class ColoredPoint extends Point { // ä¸å†è¿åå¯¹ç§°æ€§éœ€æ±‚

    private final Color color;

    public ColoredPoint(int x, int y, Color color) {
        super(x, y);
        this.color = color;
    }

    @Override public boolean equals(Object other) {
        boolean result = false;
        if (other instanceof ColoredPoint) {
            ColoredPoint that = (ColoredPoint) other;
            result = (this.color.equals(that.color) &amp;&amp; super.equals(that));
        }
        return result;
    }
}
</code></pre>

<p>è¿™é‡Œï¼ŒPointç±»çš„å®ä¾‹åªæœ‰å½“å’Œå¦å¤–ä¸€ä¸ªå¯¹è±¡æ˜¯åŒæ ·ç±»ï¼Œå¹¶ä¸”æœ‰åŒæ ·çš„åæ ‡æ—¶å€™ï¼Œä»–ä»¬æ‰è¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ï¼Œå³æ„å‘³ç€ .getClass()è¿”å›çš„æ˜¯åŒæ ·çš„å€¼ã€‚è¿™ä¸ªæ–°å®šä¹‰çš„ç­‰ä»·å…³ç³»æ»¡è¶³äº†å¯¹ç§°æ€§å’Œä¼ é€’æ€§å› ä¸ºå¯¹äºæ¯”è¾ƒå¯¹è±¡æ˜¯ä¸åŒçš„ç±»æ—¶ç»“æœæ€»æ˜¯falseã€‚æ‰€ä»¥ç€è‰²ç‚¹(colored point)æ°¸è¿œä¸ä¼šç­‰äºç‚¹(point)ã€‚é€šå¸¸è¿™çœ‹èµ·æ¥éå¸¸åˆç†ï¼Œä½†æ˜¯è¿™é‡Œä¹Ÿå­˜åœ¨ç€å¦å¤–ä¸€ç§äº‰è®ºâ€”â€”è¿™æ ·çš„æ¯”è¾ƒè¿‡äºä¸¥æ ¼äº†ã€‚</p>

<p>è€ƒè™‘æˆ‘ä»¬å¦‚ä¸‹è¿™ç§ç¨å¾®çš„è¿‚å›çš„æ–¹å¼æ¥å®šä¹‰æˆ‘ä»¬çš„åæ ‡ç‚¹(1,2)</p>

<pre><code>Point pAnon = new Point(1, 1) {
    @Override public int getY() {
        return 2;
    }
};
</code></pre>

<p>pAnonç­‰äºpå—ï¼Ÿç­”æ¡ˆæ˜¯å‡ï¼Œå› ä¸ºpå’ŒpAnonçš„java.lang.Classå¯¹è±¡ä¸åŒã€‚pæ˜¯Pointï¼Œè€ŒpAnonæ˜¯Pointçš„ä¸€ä¸ªåŒ¿åæ´¾ç”Ÿç±»ã€‚ä½†æ˜¯ï¼Œéå¸¸æ¸…æ™°çš„æ˜¯pAnonçš„ç¡®æ˜¯åœ¨åæ ‡1ï¼Œ2ä¸Šçš„å¦å¤–ä¸€ä¸ªç‚¹ã€‚æ‰€ä»¥å°†ä»–ä»¬è®¤ä¸ºæ˜¯ä¸åŒçš„ç‚¹æ˜¯æ²¡æœ‰ç†ç”±çš„ã€‚</p>

<h4 id="toc_5">canEqual æ–¹æ³•</h4>

<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬çœ‹å…¶æ¥ä¼¼ä¹æ˜¯é‡åˆ°é˜»ç¢äº†ï¼Œå­˜åœ¨ç€ä¸€ç§æ­£å¸¸çš„æ–¹å¼ä¸ä»…å¯ä»¥åœ¨ä¸åŒç±»ç»§æ‰¿å±‚æ¬¡ä¸Šå®šä¹‰ç­‰ä»·æ€§ï¼Œå¹¶ä¸”ä¿è¯å…¶ç­‰ä»·çš„è§„èŒƒæ€§å—ï¼Ÿäº‹å®ä¸Šï¼Œçš„ç¡®å­˜åœ¨è¿™æ ·çš„ä¸€ç§æ–¹æ³•ï¼Œä½†æ˜¯è¿™å°±è¦æ±‚é™¤äº†é‡å®šä¹‰equalså’ŒhashCodeå¤–è¿˜è¦å¦å¤–çš„å®šä¹‰ä¸€ä¸ªæ–¹æ³•ã€‚åŸºæœ¬æ€è·¯å°±æ˜¯åœ¨é‡è½½equals(å’ŒhashCode)çš„åŒæ—¶ï¼Œå®ƒåº”è¯¥ä¹Ÿè¦è¦æ˜ç¡®çš„å£°æ˜è¿™ä¸ªç±»çš„å¯¹è±¡æ°¸è¿œä¸ç­‰ä»·äºå…¶ä»–çš„å®ç°äº†ä¸åŒç­‰ä»·æ–¹æ³•çš„è¶…ç±»çš„å¯¹è±¡ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸€ä¸ªé‡è½½äº†equalsçš„ç±»æ–°å¢ä¸€ä¸ªæ–¹æ³•canEqualæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„æ–¹æ³•ç­¾åæ˜¯ï¼š</p>

<pre><code>public boolean canEqual(Object other)
</code></pre>

<p>å¦‚æœother å¯¹è±¡æ˜¯canEquals(é‡)å®šä¹‰é‚£ä¸ªç±»çš„å®ä¾‹æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•åº”è¯¥è¿”å›çœŸï¼Œå¦åˆ™è¿”å›falseã€‚è¿™ä¸ªæ–¹æ³•ç”±equalsæ–¹æ³•è°ƒç”¨ï¼Œå¹¶ä¿è¯äº†ä¸¤ä¸ªå¯¹è±¡æ˜¯å¯ä»¥ç›¸äº’æ¯”è¾ƒçš„ã€‚ä¸‹é¢Pointç±»çš„æ–°çš„ä¹Ÿæ˜¯æœ€ç»ˆçš„å®ç°ï¼š</p>

<pre><code>public class Point {

    private final int x;
    private final int y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    @Override public boolean equals(Object other) {
        boolean result = false;
        if (other instanceof Point) {
            Point that = (Point) other;
            result =(that.canEqual(this) &amp;&amp; this.getX() == that.getX() &amp;&amp; this.getY() == that.getY());
        }
        return result;
    }

    @Override public int hashCode() {
        return (41 * (41 + getX()) + getY());
    }
    public boolean canEqual(Object other) {
        return (other instanceof Point);
    }

}
</code></pre>

<p>è¿™ä¸ªç‰ˆæœ¬çš„Pointç±»çš„equalsæ–¹æ³•ä¸­åŒ…å«äº†ä¸€ä¸ªé¢å¤–çš„éœ€æ±‚ï¼Œé€šè¿‡canEqualsæ–¹æ³•æ¥å†³å®šå¦å¤–ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æ˜¯æ»¡è¶³å¯ä»¥æ¯”è¾ƒçš„å¯¹è±¡ã€‚åœ¨Pointä¸­çš„canEqualå®£ç§°äº†æ‰€æœ‰çš„Pointç±»å®ä¾‹éƒ½èƒ½è¢«æ¯”è¾ƒã€‚</p>

<p>ä¸‹é¢æ˜¯ColoredPointç›¸åº”çš„å®ç°</p>

<pre><code>public class ColoredPoint extends Point { // ä¸å†è¿èƒŒå¯¹ç§°æ€§

    private final Color color;

    public ColoredPoint(int x, int y, Color color) {
        super(x, y);
        this.color = color;
    }

    @Override public boolean equals(Object other) {
        boolean result = false;
        if (other instanceof ColoredPoint) {
            ColoredPoint that = (ColoredPoint) other;
            result = (that.canEqual(this) &amp;&amp; this.color.equals(that.color) &amp;&amp; super.equals(that));
        }
        return result;
    }

    @Override public int hashCode() {
        return (41 * super.hashCode() + color.hashCode());
    }

    @Override public boolean canEqual(Object other) {
        return (other instanceof ColoredPoint);
    }
}
</code></pre>

<p>åœ¨ä¸Šæ˜¾ç¤ºçš„æ–°ç‰ˆæœ¬çš„Pointç±»å’ŒColoredPointç±»å®šä¹‰ä¿è¯äº†ç­‰ä»·çš„è§„èŒƒã€‚ç­‰ä»·æ˜¯å¯¹ç§°å’Œå¯ä¼ é€’çš„ã€‚æ¯”è¾ƒä¸€ä¸ªPointå’ŒColoredPointç±»æ€»æ˜¯è¿”å›falseã€‚å› ä¸ºç‚¹på’Œç€è‰²ç‚¹cp,â€œp.equals(cp)è¿”å›çš„æ˜¯å‡ã€‚å¹¶ä¸”ï¼Œå› ä¸ºcp.canEqual(p)æ€»è¿”å›falseã€‚ç›¸åçš„æ¯”è¾ƒï¼Œcp.equals(p)åŒæ ·ä¹Ÿè¿”å›falseï¼Œç”±äºpä¸æ˜¯ä¸€ä¸ªColoredPointï¼Œæ‰€ä»¥åœ¨ColoredPointçš„equalsæ–¹æ³•ä½“å†…çš„ç¬¬ä¸€ä¸ªinstanceofæ£€æŸ¥å°±å¤±è´¥äº†ã€‚</p>

<p>å¦å¤–ä¸€ä¸ªæ–¹é¢ï¼Œä¸åŒçš„Pointå­ç±»çš„å®ä¾‹å´æ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼ŒåŒæ ·æ²¡æœ‰é‡å®šä¹‰ç­‰ä»·æ€§æ–¹æ³•çš„ç±»ä¹Ÿæ˜¯å¯ä»¥æ¯”è¾ƒçš„ã€‚å¯¹äºè¿™ä¸ªæ–°ç±»çš„å®šä¹‰ï¼Œpå’ŒpAnonçš„æ¯”è¾ƒå°†æ€»è¿”å›trueã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</p>

<pre><code>Point p = new Point(1, 2);

ColoredPoint cp = new ColoredPoint(1, 2, Color.INDIGO);

Point pAnon = new Point(1, 1) {
    @Override public int getY() {
        return 2;
    }
};

Set&lt;Point&gt; coll = new java.util.HashSet&lt;Point&gt;();
coll.add(p);

System.out.println(coll.contains(p)); // æ‰“å° true

System.out.println(coll.contains(cp)); // æ‰“å° false

System.out.println(coll.contains(pAnon)); // æ‰“å° true
</code></pre>

<p>è¿™äº›ä¾‹å­æ˜¾ç¤ºäº†å¦‚æœçˆ¶ç±»åœ¨equalsçš„å®ç°å®šä¹‰å¹¶è°ƒç”¨äº†canEqualsï¼Œé‚£ä¹ˆå¼€å‘äººå‘˜å®ç°çš„å­ç±»å°±èƒ½å†³å®šè¿™ä¸ªå­ç±»æ˜¯å¦å¯ä»¥å’Œå®ƒçˆ¶ç±»çš„å®ä¾‹è¿›è¡Œæ¯”è¾ƒã€‚ä¾‹å¦‚ColoredPointï¼Œå› ä¸ºå®ƒä»¥â€ä¸€ä¸ªç€è‰²ç‚¹æ°¸è¿œä¸å¯ä»¥ç­‰äºæ™®é€šä¸å¸¦é¢œè‰²çš„ç‚¹é‡è½½äº†â€ canEqualï¼Œæ‰€ä»¥ä»–ä»¬å°±ä¸èƒ½æ¯”è¾ƒã€‚ä½†æ˜¯å› ä¸ºpAnonå¼•ç”¨çš„åŒ¿åå­ç±»æ²¡æœ‰é‡è½½canEqual,å› æ­¤å®ƒçš„å®ä¾‹å°±å¯ä»¥å’ŒPointçš„å®ä¾‹è¿›è¡Œå¯¹æ¯”ã€‚</p>

<p>canEqualæ–¹æ³•çš„ä¸€ä¸ªæ½œåœ¨çš„äº‰è®ºæ˜¯å®ƒæ˜¯å¦è¿èƒŒäº†Liskovæ›¿æ¢å‡†åˆ™(LSP)ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡æ¯”è¾ƒè¿è¡Œæ€çš„ç±»æ¥å®ç°çš„æ¯”è¾ƒæŠ€æœ¯(<strong>è¯‘è€…æ³¨ï¼š</strong> canEqualçš„å‰ä¸€ç‰ˆæœ¬ï¼Œä½¿ç”¨.getClass()çš„é‚£ä¸ªç‰ˆæœ¬)ï¼Œå°†å¯¼è‡´ä¸èƒ½å®šä¹‰å‡ºä¸€ä¸ªå­ç±»ï¼Œè¿™ä¸ªå­ç±»çš„å®ä¾‹å¯ä»¥å’Œå…¶çˆ¶ç±»è¿›è¡Œæ¯”è¾ƒï¼Œå› æ­¤å°±è¿èƒŒäº†LSPã€‚è¿™æ˜¯å› ä¸ºï¼ŒLSPåŸåˆ™æ˜¯è¿™æ ·çš„ï¼Œåœ¨ä»»ä½•ä½ èƒ½ä½¿ç”¨çˆ¶ç±»çš„åœ°æ–¹ä½ éƒ½å¯ä»¥ä½¿ç”¨å­ç±»å»æ›¿æ¢å®ƒã€‚åœ¨ä¹‹å‰ä¾‹å­ä¸­ï¼Œè™½ç„¶cpçš„x,yåæ ‡åŒ¹é…é‚£äº›åœ¨é›†åˆä¸­çš„ç‚¹ï¼Œç„¶è€Œâ€coll.contains(cp)â€ä»ç„¶è¿”å›falseï¼Œè¿™çœ‹èµ·æ¥ä¼¼ä¹è¿èƒŒå¾—äº†LSPå‡†åˆ™ï¼Œå› ä¸ºä½ ä¸èƒ½è¿™é‡Œèƒ½ä½¿ç”¨Pointçš„åœ°æ–¹ä½¿ç”¨ä¸€ä¸ªColoredPointedã€‚ä½†æ˜¯æˆ‘ä»¬è®¤ä¸ºè¿™ç§è§£é‡Šæ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºLSPåŸåˆ™å¹¶æ²¡æœ‰è¦æ±‚å­ç±»å’Œçˆ¶ç±»çš„è¡Œä¸ºä¸€è‡´ï¼Œè€Œä»…è¦æ±‚å…¶è¡Œä¸ºèƒ½ä¸€ç§æ–¹å¼æ»¡è¶³çˆ¶ç±»çš„è§„èŒƒã€‚</p>

<p>é€šè¿‡æ¯”è¾ƒè¿è¡Œæ€çš„ç±»æ¥ç¼–å†™equalsæ–¹æ³•(<strong>è¯‘è€…æ³¨ï¼š</strong> canEqualçš„å‰ä¸€ç‰ˆæœ¬ï¼Œä½¿ç”¨.getClass()çš„é‚£ä¸ªç‰ˆæœ¬)çš„é—®é¢˜å¹¶ä¸æ˜¯è¿èƒŒLSPå‡†åˆ™çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒä¹Ÿæ²¡æœ‰ä¸ºä½ æŒ‡æ˜ä¸€ç§åˆ›å»ºæ´¾ç”Ÿç±»çš„å®ä¾‹èƒ½å’Œçˆ¶ç±»å®ä¾‹è¿›è¡Œå¯¹æ¯”çš„çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ç§è¿è¡Œæ€æ¯”è¾ƒçš„æŠ€æœ¯åœ¨ä¹‹å‰çš„â€coll.contains(pAnon)â€å°†ä¼šè¿”å›falseï¼Œå¹¶ä¸”è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ã€‚ç›¸åæˆ‘ä»¬å¸Œæœ›â€œcoll.contains(cp)â€è¿”å›falseï¼Œå› ä¸ºé€šè¿‡åœ¨ColoredPointä¸­é‡è½½çš„equalsï¼Œæˆ‘åŸºæœ¬ä¸Šå¯ä»¥è¯´ï¼Œä¸€ä¸ªåœ¨åæ ‡1ï¼Œ2ä¸Šç€è‰²ç‚¹å’Œä¸€ä¸ªåæ ‡1ï¼Œ2ä¸Šçš„æ™®é€šç‚¹å¹¶ä¸æ˜¯ä¸€å›äº‹ã€‚ç„¶è€Œï¼Œåœ¨æœ€åçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬èƒ½ä¼ é€’Pointä¸¤ç§ä¸åŒçš„å­ç±»å®ä¾‹åˆ°é›†åˆä¸­containsæ–¹æ³•ï¼Œå¹¶ä¸”æˆ‘ä»¬èƒ½å¾—åˆ°ä¸¤ä¸ªä¸åŒçš„ç­”æ¡ˆï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªç­”æ¡ˆéƒ½æ­£ç¡®ã€‚</p>

<p><strong>â€“å…¨æ–‡å®Œâ€“</strong></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/5</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Android%E5%BC%80%E5%8F%91.html'>Androidå¼€å‘</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14720509840810.html">
                
                  <h1>Android GPSå®šä½æ¬ºéª—(æ¨¡æ‹Ÿå®šä½)çš„ä¸¤ç§æ–¹å¼</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>å‰æ®µæ—¶é—´å‘å¸ƒçš„æ‰‹æ¸¸PokemonGoç›¸ä¿¡å¤§å®¶éƒ½æœ‰è€³é—»ï¼Œè€Œå› ä¸ºè¿™ä¸ªæ¸¸æˆåœ¨å›½å†…çš„åæ ‡é­åˆ°äº†å°é”ï¼Œå¾ˆå¤šç§‘å­¦æ¸¸æˆæ–¹æ³•ä¹Ÿé™†ç»­æ¶Œç°ã€‚å¥½ä¸çƒ­é—¹ã€‚<br/>
é‚£å…¶å®ï¼ŒPokemonGoæœ€åˆçš„ç‰ˆæœ¬ï¼Œåœ¨å¤§é™†æ˜¯å¯ä»¥é€šè¿‡ç®€å•çš„vpn+gpsæ¬ºéª—è¿›è¡Œæ¸¸æˆçš„ã€‚<br/>
ä¸è¿‡å¾ˆå¿«åœ°ï¼Œåœ¨æ–°çš„ç‰ˆæœ¬æ›´æ–°ä¸­å°±å°é”äº†è¿™ä¸€æ–¹å¼ã€‚</p>

<p>è€Œå¯¹Androidç³»ç»Ÿä½¿ç”¨GPSæ¬ºéª—ï¼Œåº”ç”¨åœºæ™¯ä¹Ÿç»ä¸åªæ˜¯è¿™ä¸€ä¸ªæ¸¸æˆè€Œå·²ã€‚æ‰€ä»¥æˆ‘ä»Šå¤©æ¥ç®€å•ä»‹ç»ä¸€ä¸‹å¯ä½¿ç”¨çš„å‡ ç§æ–¹å¼ã€‚</p>

<blockquote>
<p>æ§åˆ¶å™ªå£°çš„æ–¹å¼æœ‰ä¸‰ç§ï¼šé˜²æ­¢å™ªå£°äº§ç”Ÿï¼Œé˜»æ–­å™ªå£°ä¼ æ’­å’Œé˜²æ­¢å™ªå£°è¿›å…¥è€³æœµ</p>
</blockquote>

<p>ç›¸å¯¹åº”çš„ï¼Œ</p>

<blockquote>
<p>ä¿®æ”¹GPSå®šä½ç»“æœçš„ä¸‰ç§é€”å¾„ï¼š ç¼–è¯‘æ—¶ä¿®æ”¹NLPç»“æœï¼Œè¿è¡Œæ—¶ä¿®æ”¹LocationManagerç»“æœï¼Œä»åº”ç”¨è·å–åˆ°çš„ç»“æœä¿®æ”¹ã€‚</p>
</blockquote>

<h3 id="toc_0">1. ç¼–è¯‘æ—¶ä¿®æ”¹NLPç»“æœ</h3>

<p>éš¾åº¦ç³»æ•°ï¼šäº”é¢—æ˜Ÿ<br/>
å»ºè®®ï¼šæƒ³éƒ½åˆ«æƒ³<br/>
å¤§æ¦‚æ€è·¯ï¼šä¿®æ”¹nlpéƒ¨åˆ†æºç ï¼Œé‡ç¼–ç³»ç»Ÿ</p>

<h3 id="toc_1">2. è¿è¡Œæ—¶ä¿®æ”¹LocationManagerç»“æœ</h3>

<p>è¿™ä¸ªåˆ†ä¸¤ç±»ï¼š</p>

<blockquote>
<p><strong>ä¸€ç±»</strong>ï¼š ä½¿ç”¨androidè‡ªå¸¦çš„è°ƒè¯•apiï¼Œæ¨¡æ‹Ÿgps providerçš„ç»“æœã€‚</p>
</blockquote>

<pre><code>LocationManager.setTestProviderLocation(Provider, Location);
</code></pre>

<p>ä¼˜ç‚¹ï¼šç®€å•ï¼Œæ— éœ€root<br/>
ç¼ºç‚¹ï¼šä¸ç¨³å®šï¼Œç‰¹å¾æ˜æ˜¾ï¼Œå®¹æ˜“æŒ‰ç‰¹å¾å—…æ¢åˆ°ï¼ˆæœ‰åä½œå¼Šæœºåˆ¶çš„æ¸¸æˆåŸºæœ¬éƒ½èƒ½æŸ¥å‡ºæ¥ï¼‰ï¼Œéœ€è¦æ‰“å¼€å¼€å‘è€…çš„å…è®¸æ¨¡æ‹Ÿä½ç½®é€‰é¡¹</p>

<blockquote>
<p><strong>ç¬¬äºŒç±»</strong>: ä½¿ç”¨xposed,ä¼ è¯´ä¸­çš„androidç¥å™¨ï¼Œç”¨å®ƒå¯¹app_processè¿›è¡Œæ³¨å…¥ã€‚</p>
</blockquote>

<p>æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Œå°±æ˜¯ä½ å¯ä»¥æ”¾ä¸ªé’©å­ï¼Œè‹±æ–‡åå«hookã€‚è¿™ä¸ªé’©å­èƒ½çŸ¥é“ä½ ç³»ç»Ÿé‡Œçš„æ¯ä¸ªåº”ç”¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨äº†å“ªä¸ªå‡½æ•°ï¼Œè¿˜èƒ½ä¿®æ”¹å¯¹åº”çš„è¿™ä¸ªå‡½æ•°ã€‚<br/>
è¯´åˆ°è¿™å°±æ‡‚äº†å§ã€‚æ¯”å¦‚ä½ çŒœæµ‹å¯¹åº”appä¼šä½¿ç”¨LocationManager.getLastKnownLocationçš„ç»“æœã€‚ç„¶åä½ ç”¨xposedæŠŠå†…å­˜é‡Œçš„è¿™ä¸ªå‡½æ•°è¿”å›å€¼æ”¹æˆ <code>çº¬åº¦Â N 39.832670Â° ä¸œç» E116.460370Â°</code>ï¼Œç„¶åè°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ç¨‹åºçœ‹åˆ°çš„è®°è¿‡å°±æ˜¯ä½ ä¿®æ”¹ä¹‹åçš„ç»“æœã€‚<br/>
å…·ä½“ä»£ç çœ‹è¿™é‡Œå§ï¼ˆéæœ¬äººrepoï¼Œåªæ˜¯æ‰¾äº†ä¸ªç®€å•æ˜“æ‡‚çš„demoï¼‰<br/>
<a href="https://github.com/YiuChoi/FakeGps/tree/master/app/src/main/java/name/caiyao/fakegps/hook">FakeGPS demo</a></p>

<p>ä¼˜ç‚¹ï¼šç¨³å®šï¼Œéš¾ä»¥è¢«åæŸ¥<br/>
ç¼ºç‚¹ï¼šéœ€è¦root</p>

<h3 id="toc_2">3. å¯¹æƒ³æ¬ºéª—çš„appåç¼–è¯‘ï¼Œä¿®æ”¹ç»“æœ</h3>

<p>è¯¥æ€ä¹ˆåšçœ‹æ ‡é¢˜å°±æ˜ç™½äº†ã€‚<br/>
æ­¥éª¤å°±æ˜¯<br/>
1. åç¼–è¯‘<br/>
2. æ‰¾åˆ°æ‰€æœ‰ä½¿ç”¨äº†å®šä½ç»“æœçš„ä½ç½®<br/>
3. ä¿®æ”¹ç»“æœ<br/>
4. é‡æ–°æ‰“åŒ…</p>

<p>è¿™ä¸ªæ–¹å¼çš„ä¼˜ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ã€‚<br/>
ä¼˜ç‚¹ï¼š æ— éœ€rootï¼Œç¨³å®šæ€§å¼ºï¼ˆå‰ææ˜¯æ‰¾å‡†å…¥å£ï¼‰<br/>
ç¼ºç‚¹ï¼š æŠ€æœ¯æ°´å¹³è¦æ±‚é«˜ã€‚æ ¹æ®åº”ç”¨å¤æ‚ç¨‹åº¦ã€æ··æ·†ã€å®‰å…¨ç­–ç•¥ç­‰ä¸åŒï¼Œéš¾åº¦å·®å¼‚è¾ƒå¤§ã€‚éš¾æ˜“ç¨‹åº¦åŒ…æ‹¬å¾ˆå¤šå†…å®¹ï¼ŒåŒ…æ‹¬æ··æ·†éƒ¨åˆ†ã€å…¥å£å¯»æ‰¾ã€ç­¾åéªŒè¯ç­‰ã€‚ æˆ‘ä¹Ÿä¸ç†Ÿå•Šï¼Œæ„Ÿå…´è¶£çš„åŒå­¦è¯·è‡ªè¡Œæ·±å…¥å­¦ä¹ å§ã€‚</p>

<p>â€”â€”â€”â€”â€”â€”â€”â€”</p>

<p>3ç±»4ç§æ¬ºéª—æ–¹å¼ï¼Œå„ä½çœ‹å®˜æ”¶å¥½ã€‚</p>

<p>ä»¥ä¸Šã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/8/24</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Android%E5%BC%80%E5%8F%91.html'>Androidå¼€å‘</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14720509627845.html">
                
                  <h1>android - LinearLayout RelativeLayoutåœ¨å¸ƒå±€æ—¶ä¼˜å…ˆé€‰æ‹©è°ï¼Ÿæœ‰ä½•åŒºåˆ«ï¼Ÿ</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>å¾ˆå¤šåˆæ¥è§¦androidçš„åŒå­¦åœ¨å¸ƒå±€æ—¶éƒ½ä¼šæœ‰è¿™æ ·ä¸€ä¸ªç–‘é—®ï¼š</p>

<blockquote>
<p>è¿™ä¸ªå¸ƒå±€çš„çˆ¶äº²ç”¨LinearLayoutå’ŒRelativeLayoutéƒ½å¯ä»¥ï¼Œæˆ‘ç”¨å“ªä¸ªæ›´åˆé€‚å‘¢ï¼Ÿ</p>
</blockquote>

<p>æœ‰äº›åŒå­¦å¯èƒ½å°±å¼€å§‹æƒé‡äº†ï¼ŒRelativeLayoutæ›´çµæ´»ï¼Œç”¨è¿™ä¸ªå§ã€‚ä½†æ˜¯æ„Ÿè§‰LinearLayoutæ›´æ–¹ä¾¿å•Šï¼Œè‡ªåŠ¨å¸®æˆ‘æŠŠè¿™å‡ ä¸ªViewåˆ†å¸ƒå¼€äº†ï¼Œä¸ä¼šä¸€å¼€å§‹å°±æŒ¤åœ¨ä¸€å—ã€‚</p>

<p>å…¶å®å‘¢ï¼Œéšç€é¡¹ç›®çš„è¿›å±•ï¼Œå¸ƒå±€ä¼šå‘ç”Ÿè°ƒæ•´ï¼Œè¿™æ˜¯å†è‡ªç„¶ä¸è¿‡çš„äº‹æƒ…ã€‚</p>

<blockquote>
<p>ä¸è¦è®©è‡ªå·±è¿™äº›ã€ä¸»è§‚ã€çš„æ€è€ƒæ‹–æ…¢è¿›åº¦ã€‚</p>
</blockquote>

<p>ä»Šå¤©æˆ‘ä»æ•°æ®ä¸Šæ¥è¯´ä¸‹åœ¨é¢ä¸´è¿™ç§æƒ…å†µï¼ˆä¸¤è€…éƒ½å¯é€‰æ‹©ï¼‰æ—¶ï¼Œåº”å¦‚ä½•é€‰æ‹©ã€‚</p>

<p><strong>æ³¨: å½“ç„¶ï¼Œå¾ˆå¤šæƒ…å†µä¼šæœ‰å…¶å®ƒæ›´å¥½çš„é€‰æ‹©ï¼Œæˆ‘è¿™é‡Œä»…å°±è¿™ä¸¤è€…è¿›è¡Œå¯¹æ¯”ã€‚</strong></p>

<blockquote>
<p>ä»æ•ˆç‡çš„è§’åº¦è€ƒè™‘ï¼Œé€‰å–æ¸²æŸ“é€Ÿåº¦æ›´å¿«çš„é‚£ä¸ªã€‚</p>
</blockquote>

<p>æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªViewçš„ç»˜åˆ¶åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼š<br/>
1. æµ‹é‡ measure<br/>
2. å¸ƒå±€ layout<br/>
3. ç»˜åˆ¶ draw</p>

<p>è¿™ä¸‰ä¸ªå“ªä¸ªæ‹–åè…¿éƒ½ä¼šå½±å“æ¸²æŸ“æ•ˆç‡ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹ä½¿ç”¨ä¸åŒçš„å¸ƒå±€æ—¶ï¼Œè¿™ä¸‰è€…ä¹‹é—´çš„å·®è·ã€‚</p>

<table>
<thead>
<tr>
<th></th>
<th>å­View</th>
<th>çˆ¶View</th>
</tr>
</thead>

<tbody>
<tr>
<td>çˆ¶Viewä½¿ç”¨LinearLayout</td>
<td><img src="http://upload-images.jianshu.io/upload_images/25769-ad4a99485588a741.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="linear_child.png"/></td>
<td><img src="http://upload-images.jianshu.io/upload_images/25769-c2a9998a2d24bc74.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="linear_parent.png"/></td>
</tr>
<tr>
<td>çˆ¶Viewä½¿ç”¨RelativeLayout</td>
<td><img src="http://upload-images.jianshu.io/upload_images/25769-0d2ff6157d6133e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="relative_child.png"/></td>
<td><img src="http://upload-images.jianshu.io/upload_images/25769-4c1f5807cd35172d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="relative_parent.png"/></td>
</tr>
</tbody>
</table>

<p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ <strong>Measure</strong> æ—¶é—´ã€‚<br/>
é€šè¿‡å¯¹æ¯”æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œçˆ¶Viewä½¿ç”¨LinearLayoutæ—¶ï¼Œçˆ¶äº²å’Œå­©å­çš„Measureæ—¶é—´æ˜¯ç›¸å·®æ— å‡ çš„ã€‚<br/>
è€Œçˆ¶Viewä½¿ç”¨RelativeLayoutæ—¶ï¼Œçˆ¶äº²å‡ ä¹æ˜¯å­©å­çš„ä¸¤å€ã€‚</p>

<blockquote>
<p>RelativeLayout çš„å­Viewç»å¸¸ä¼šè¢«measureä¸¤æ¬¡ã€‚</p>
</blockquote>

<h3 id="toc_0">ç»“è®º</h3>

<ol>
<li>ä¸¤è€…éƒ½å¯ä½¿ç”¨ï¼Œå¹¶ä¸”å±‚æ•°ä¸å—å½±å“çš„å‰æä¸‹ï¼Œå°½é‡ä½¿ç”¨LinearLayout.</li>
<li>è‹¥æ˜¯å±‚æ•°å—å½±å“ï¼Œä¼˜å…ˆè€ƒè™‘å±‚æ•°å°‘çš„ã€‚(è¿™ç‚¹ä¼šåœ¨ä»¥åçš„æ–‡ç« ä¸­è°ˆåˆ°)</li>
</ol>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/8/24</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Android%E5%BC%80%E5%8F%91.html'>Androidå¼€å‘</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14720508913010.html">
                
                  <h1>å¸¦é˜´å½±çš„TextView æ·¡å…¥æ·¡å‡ºåŠ¨ç”»å¼‚å¸¸ï¼Œæ˜¾ç¤ºå¤šä½™çš„é˜´å½±</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h4 id="toc_0">1. é—®é¢˜</h4>

<p>å¸¦é˜´å½±çš„TextView æ·¡å…¥æ·¡å‡ºåŠ¨ç”»å¼‚å¸¸ï¼Œæœ‰å¤šä½™çš„é˜´å½±</p>

<h4 id="toc_1">2. å¤ç°æ­¥éª¤</h4>

<ol>
<li>TextView è®¾ç½®é˜´å½±</li>
<li>å¯¹TextViewè®¾ç½®çš„alphaå€¼è®¾ç½® ObjectAnimator</li>
<li>è§‚å¯Ÿ</li>
</ol>

<h4 id="toc_2">3. ä¸Šå›¾</h4>

<table>
<thead>
<tr>
<th>TextViewåº•éƒ¨æœ‰å¤šä½™é˜´å½±</th>
<th>åŠ¨ç”»æ­£å¸¸</th>
</tr>
</thead>

<tbody>
<tr>
<td><img src="http://upload-images.jianshu.io/upload_images/25769-6ba639edeab70edb.jpg?imageMogr2/auto-orient/strip" alt=""/></td>
<td><img src="http://upload-images.jianshu.io/upload_images/25769-57053d376b7c5fd8.jpg?imageMogr2/auto-orient/strip" alt=""/></td>
</tr>
</tbody>
</table>

<h4 id="toc_3">4. åŸå› </h4>

<ol>
<li>ç¡¬ä»¶åŠ é€Ÿå¹¶éå¯¹æ‰€æœ‰2Då›¾å½¢çš„æ”¯æŒéƒ½å¾ˆå¥½ï¼Œå¤„ç†alphaç›¸å…³çš„äº‹ä»¶æ—¶éœ€å°¤ä¸ºæ³¨æ„ã€‚</li>
<li>å¹¶éæ‰€æœ‰æ–¹æ³•éƒ½æœ‰åšåº”å¯¹å¤„ç†ã€‚</li>
</ol>

<h4 id="toc_4">5. è§£å†³æ–¹æ¡ˆ</h4>

<ol>
<li>å¯¹ç›¸åº”çš„Viewæˆ–Activityæˆ–Applicationå…³é—­ç¡¬ä»¶åŠ é€Ÿã€‚</li>
<li>ä½¿ç”¨å…¶ä»–æ›¿ä»£æ–¹æ³•å®ç°åŠ¨ç”»ã€‚è¿™å°±è¦çœ‹å…·ä½“æ–¹æ³•çš„å®ç°äº†ã€‚</li>
</ol>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/8/24</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Android%E5%BC%80%E5%8F%91.html'>Androidå¼€å‘</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14701507519730.html">
                
                  <h1>Androidåº”ç”¨æ¨ªç«–å±åˆ‡æ¢çš„ä¸¤ç§æ–¹å¼ï¼Œä»è¡¨ç°ä¸Šçœ‹æœ€å¤§çš„åŒºåˆ«</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>æˆ‘ä»¬çŸ¥é“androidåº”ç”¨æ›´æ”¹å±å¹•æ–¹å‘æœ‰ä¸¤ç§æ–¹å¼ï¼Œå¯¹åº”ä¸¤ç§è¿‡ç¨‹ï¼Œä¸€æ˜¯é”€æ¯é‡å»ºï¼ŒäºŒæ˜¯è®¾ç½®onConfigurationChangedã€‚åœ¨å…¶ä¸­åšæ”¹å˜æ–¹å‘çš„å¤„ç†ã€‚</p>

<p>å¾ˆä¹…å‰æˆ‘ä»¬çš„æµ‹è¯•åŒå­¦ç»™è®¡ç®—å™¨åº”ç”¨æŠ¥äº†ä¸€ä¸ªbugï¼Œè¯´åº”ç”¨æ—‹è½¬åˆ°æ¨ªå±åé”å±ï¼Œå†è§£é”ã€‚æ­¤æ—¶åº”ç”¨ä¼šå…ˆå›åˆ°ç«–å±ï¼Œå†è½¬æ¢åˆ°æ¨ªå±(å›¾ä¸€)ã€‚æ­£ç¡®çš„è¡¨ç°åº”è¯¥å’Œæµè§ˆå™¨çš„è¡¨ç°ä¸€æ ·(å›¾äºŒ),è§£é”åç›´æ¥è¿›å…¥æ¨ªå±ã€‚<br/>
<img src="http://i.imgur.com/m9kqNuh.gif" alt="å›¾ä¸€ï¼Œè¡¨ç°é”™è¯¯ï¼Œä½¿ç”¨é”€æ¯é‡å»ºçš„æ–¹å¼"/><br/>
<img src="http://i.imgur.com/jsswjwK.gif" alt="å›¾äºŒï¼Œè¡¨ç°æ­£ç¡®ï¼Œä½¿ç”¨onConfigurationChanged"/></p>

<p>ç™¾æ€ä¸å¾—å…¶è§£ã€‚<br/>
åæ¥è§£ä¸€ä¸ªæ€§èƒ½ç›¸å…³çš„bugï¼Œå¾ˆå·§åœ°æŠŠåŸæ¥é”€æ¯é‡å»ºçš„æ–¹å¼ï¼Œæ”¹æˆäº†onConfigurationChangedå¤„ç†ã€‚æ— æ„é—´è§£äº†è¿™ä¸ªæç½®å¾ˆä¹…çš„é—®é¢˜ã€‚</p>

<p>æ ¹æ®systraceçš„ç»“æœï¼Œæ¨æµ‹å¯èƒ½çš„åŸå› å¦‚ä¸‹ã€‚<br/>
1. é”€æ¯é‡å»ºï¼Œå…¶é—´ä¼šè¿›è¡Œç›®æ ‡activityçš„é”€æ¯ã€é‡å»ºä»¥åŠå…¶å®ƒç³»ç»Ÿè°ƒç”¨ã€‚è¿™ä¸€ç³»åˆ—åŠ¨ä½œä¸èƒ½åœ¨ä¸€å¸§å†…å®Œæˆï¼Œå¯¼è‡´è§£é”æ—¶èƒ½çœ‹åˆ°ç«–å±åˆ‡æ¢åˆ°æ¨ªå±çš„åŠ¨ä½œã€‚<br/>
2. onConfigurationChangedï¼Œæ¨ªç«–å±åˆ‡æ¢å…¶é—´åªæ‰§è¡Œè¿™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä¸­åªæœ‰layoutçš„MLDæ“ä½œï¼Œè¿™ä¸€ç³»åˆ—åŠ¨ä½œåœ¨çŸ­æ—¶é—´å†…å®Œæˆï¼Œå› æ­¤æˆ‘ä»¬çœ‹åˆ°çš„ä¹Ÿå°±ç›´æ¥è¿›å…¥å’Œæ¨ªå±ã€‚<br/>
3. å¯èƒ½æœ‰å…¶å®ƒactivityç®¡ç†ä¹‹é—´çš„åŸå› ï¼Œæš‚ä¸æ¸…æ¥šã€‚çŸ¥é“çš„è¯·ä¸åèµæ•™ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/8/2</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Android%E5%BC%80%E5%8F%91.html'>Androidå¼€å‘</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14685051740290.html">
                
                  <h1>PokemonGoç ´è§£</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<ol>
<li>ç®€å•çš„æ›´æ”¹unityä½ç½®
æŠ¥é”™
<code>07-14 22:04:02.801 7512-9260/? E/NianticAccountManager: User cannot be authenticated.
                                                    com.google.android.gms.auth.GoogleAuthException: INVALID_AUDIENCE
                                                        at com.google.android.gms.auth.GoogleAuthUtil.zza(Unknown Source)
                                                        at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
                                                        at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
                                                        at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
                                                        at com.nianticlabs.nia.account.NianticAccountManager.getAccount(NianticAccountManager.java:75)</code></li>
</ol>

<h2 id="toc_0">æµ‹è¯•ä¸€ä¸‹æ˜¯å¦æœ‰ç­¾åç™»å½•ä¿æŠ¤ä¹‹ç±»çš„ç­–ç•¥ã€‚</h2>

<p>ä½¿ç”¨apkåç¼–è¯‘åç›´æ¥é‡æ–°æ‰“åŒ…ï¼Œæ‰“å¼€appã€‚<br/>
googleè´¦å·é‰´æƒæˆåŠŸã€‚æ²¡é—®é¢˜ï¼</p>

<h2 id="toc_1">æµ‹è¯•åšäº›ç®€å•çš„ä¿®æ”¹</h2>

<p><code>    invoke-virtual {p0, v0}, Lcom/kodelabs/boilerplate/presentation/ui/activities/MainActivity;-&gt;updateLocation(Landroid/location/Location;)V</code><br/>
<code><br/>
.method public updateLocation(Landroid/location/Location;)V<br/>
    .locals 2<br/>
    .param p1, &quot;location&quot;    # Landroid/location/Location;</p>

<pre><code>.prologue
.line 31
const-wide v0, -0x3fa7170e2c12ad82L    # -99.63976

invoke-virtual {p1, v0, v1}, Landroid/location/Location;-&gt;setLongitude(D)V

.line 32
const-wide v0, 0x4043d0087ca643ccL    # 39.625259

invoke-virtual {p1, v0, v1}, Landroid/location/Location;-&gt;setLatitude(D)V

.line 33
return-void
</code></pre>

<p>.end method</code></p>

<h2 id="toc_2">æ‰“åŒ…å®‰è£…</h2>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/7/14</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Android%E5%BC%80%E5%8F%91.html'>Androidå¼€å‘</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14583860309318.html">
                
                  <h1>Creating a Navigation Drawer</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">è¡¨ç°</h2>

<p>Navigation Drawer <br/>
<img src="media/14583860309318/14583864312339.jpg" alt=""/></p>

<p>æ‰‹æŒ‡ä»å±å¹•å·¦è¾¹å³æ»‘ï¼Œæ‰“å¼€çš„è¿™ä¸ªåƒ Menu ä¸€æ ·çš„çš„é¡µé¢å°±è¢«ç§°ä¸º NavigationDrawerã€‚<br/>
è°·æ­Œåœ¨ MD è§„èŒƒä¸­è¯¦ç»†è¯´æ˜äº†å®ƒçš„è®¾è®¡è§„èŒƒï¼Œåœ¨å¼€å§‹è®¾è®¡ä½ çš„åº”ç”¨æ—¶è¯·åŠ¡å¿…é˜…è¯»ä½œä¸ºå‚è€ƒã€‚<br/>
<a href="http://developer.android.com/design/patterns/navigation-drawer.html">Navigation Drawer</a></p>

<h2 id="toc_1">å®ç°æ€è·¯</h2>

<p>åˆ†æä¸€ä¸‹ï¼Œå¾ˆå®¹æ˜“çœ‹å‡ºæ¥ï¼ŒåŸºæœ¬æ˜¯åˆ†ä¸ºä¸¤å±‚ã€‚ä¸Šå±‚çš„è¿™ä¸ª Drawer å±‚(åŒ…å«ä½ çœ‹åˆ°çš„è¿™ä¸ª View å’Œå¯èƒ½è¢«å¿½ç•¥çš„è¦†ç›–ä¸‹å±‚çš„é˜´å½±)ï¼Œä¸‹å±‚çš„åŒ…å«äº†é¡µé¢æœ¬èº«çš„å†…å®¹å±‚(ActionBar TabLayout å…¶å®ƒå†…å®¹)ã€‚</p>

<h2 id="toc_2">ä½¿ç”¨æ–¹å¼</h2>

<p>æ‰€ä»¥ï¼Œä½¿ç”¨ä¹Ÿå¾ˆç¬¦åˆæ€è€ƒæ¨¡å¼ï¼šä»¥ DrawerLayout ä¸ºæ ¹ View åŒ…å«ä¸¤å±‚å­ Viewã€‚</p>

<h3 id="toc_3">1. XML æ–‡ä»¶</h3>

<pre><code class="language-&lt;android.support.v4.widget.DrawerLayout">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:id=&quot;@+id/drawer_layout&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;&gt;
    &lt;!-- The main content view --&gt;
    &lt;FrameLayout
        android:id=&quot;@+id/content_frame&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot; /&gt;
    &lt;!-- The navigation drawer --&gt;
    &lt;ListView android:id=&quot;@+id/left_drawer&quot;
        android:layout_width=&quot;240dp&quot;
        android:layout_height=&quot;match_parent&quot;
        android:layout_gravity=&quot;start&quot;
        android:choiceMode=&quot;singleChoice&quot;
        android:divider=&quot;@android:color/transparent&quot;
        android:dividerHeight=&quot;0dp&quot;
        android:background=&quot;#111&quot;/&gt;
&lt;/android.support.v4.widget.DrawerLayout&gt;
</code></pre>

<p><strong>æ³¨æ„çš„ç‚¹</strong><br/>
*  å†…å®¹å±‚å¿…é¡»æ˜¯DrawerLayout çš„ç¬¬ä¸€ä¸ªå­ Viewã€‚å› ä¸º XML ä»¥ View çš„é¡ºåºå†³å®š Z çš„æ¬¡åºã€‚<br/>
*  drawer å±‚å¿…é¡»è®¾å®š android:layout_gravity å±æ€§ã€‚ç”¨æ¥æ”¯æŒ right-to-left è¯­è¨€ã€‚æ³¨æ„ç”¨ &quot;start&quot; ä»£æ›¿ &quot;left&quot;ã€‚<br/>
*  drawer å±‚çš„å®½åº¦å°äº320dpï¼Œè¿™æ ·å±•å¼€æ—¶ä¹Ÿèƒ½çœ‹åˆ°ä¸‹æ–¹çš„å†…å®¹ã€‚é«˜åº¦ match_parentã€‚</p>

<h3 id="toc_4">2. ä»£ç å¯¹å†…å®¹è¿›è¡Œé…ç½®</h3>

<pre><code>public class MainActivity extends Activity {
    private String[] mPlanetTitles;
    private DrawerLayout mDrawerLayout;
    private ListView mDrawerList;
    ...

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mPlanetTitles = getResources().getStringArray(R.array.planets_array);
        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);
        mDrawerList = (ListView) findViewById(R.id.left_drawer);

        // Set the adapter for the list view
        mDrawerList.setAdapter(new ArrayAdapter&lt;String&gt;(this,
                R.layout.drawer_list_item, mPlanetTitles));
        // Set the list&#39;s click listener
        mDrawerList.setOnItemClickListener(new DrawerItemClickListener());

        ...
    }
}
</code></pre>

<h3 id="toc_5">3. å¤„ç†å…¶å®ƒé—®é¢˜</h3>

<h4 id="toc_6">3.1 å¤„ç†ç‚¹å‡»äº‹ä»¶å¯¼èˆª</h4>

<p>ç»™ Drawer çš„ ListView è®¾ç½® OnItemClickListener å°±è¡Œã€‚<br/>
<strong>ç¤ºä¾‹ä»£ç </strong><br/>
```<br/>
private class DrawerItemClickListener implements ListView.OnItemClickListener {<br/>
    @Override<br/>
    public void onItemClick(AdapterView parent, View view, int position, long id) {<br/>
        selectItem(position);<br/>
    }<br/>
}</p>

<p>/** Swaps fragments in the main content view */<br/>
private void selectItem(int position) {<br/>
    // Create a new fragment and specify the planet to show based on position<br/>
    Fragment fragment = new PlanetFragment();<br/>
    Bundle args = new Bundle();<br/>
    args.putInt(PlanetFragment.ARG_PLANET_NUMBER, position);<br/>
    fragment.setArguments(args);</p>

<pre><code>// Insert the fragment by replacing any existing fragment
FragmentManager fragmentManager = getFragmentManager();
fragmentManager.beginTransaction()
               .replace(R.id.content_frame, fragment)
               .commit();

// Highlight the selected item, update the title, and close the drawer
mDrawerList.setItemChecked(position, true);
setTitle(mPlanetTitles[position]);
mDrawerLayout.closeDrawer(mDrawerList);
</code></pre>

<p>}</p>

<p>@Override<br/>
public void setTitle(CharSequence title) {<br/>
    mTitle = title;<br/>
    getActionBar().setTitle(mTitle);<br/>
}<br/>
```</p>

<h4 id="toc_7">ç›‘å¬ Drawer å±•å¼€ã€å…³é—­äº‹ä»¶</h4>

<p>è°ƒç”¨ DrawerLayout.setDrawerListener() æ–¹æ³•ï¼Œä¼ é€’ä¸€ä¸ª DrawerLayout.DrawerListener æ¥å£çš„å®ç°ã€‚<br/>
å®ç°è¿™ä¸ªæ¥å£æœ‰ä¸¤ç§æ–¹å¼ã€‚<br/>
1. ç›´æ¥å®ç° DrawerListener.<br/>
2. å†™ä¸€ä¸ªç»§æ‰¿ ActionBarDrawerToggle çš„å­ç±»ï¼Œè¿™ä¸ªç±»å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œä½ å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™ DrawerListener æ¥å£å‡½æ•°ã€‚</p>

<p><strong>ç¤ºä¾‹ä»£ç </strong><br/>
```<br/>
public class MainActivity extends Activity {<br/>
    private DrawerLayout mDrawerLayout;<br/>
    private ActionBarDrawerToggle mDrawerToggle;<br/>
    private CharSequence mDrawerTitle;<br/>
    private CharSequence mTitle;<br/>
    ...</p>

<pre><code>@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ...

    mTitle = mDrawerTitle = getTitle();
    mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);
    mDrawerToggle = new ActionBarDrawerToggle(this, mDrawerLayout,
            R.drawable.ic_drawer, R.string.drawer_open, R.string.drawer_close) {

        /** Called when a drawer has settled in a completely closed state. */
        public void onDrawerClosed(View view) {
            super.onDrawerClosed(view);
            getActionBar().setTitle(mTitle);
            invalidateOptionsMenu(); // creates call to onPrepareOptionsMenu()
        }

        /** Called when a drawer has settled in a completely open state. */
        public void onDrawerOpened(View drawerView) {
            super.onDrawerOpened(drawerView);
            getActionBar().setTitle(mDrawerTitle);
            invalidateOptionsMenu(); // creates call to onPrepareOptionsMenu()
        }
    };

    // Set the drawer toggle as the DrawerListener
    mDrawerLayout.setDrawerListener(mDrawerToggle);
}

/* Called whenever we call invalidateOptionsMenu() */
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    // If the nav drawer is open, hide action items related to the content view
    boolean drawerOpen = mDrawerLayout.isDrawerOpen(mDrawerList);
    menu.findItem(R.id.action_websearch).setVisible(!drawerOpen);
    return super.onPrepareOptionsMenu(menu);
}
</code></pre>

<p>}<br/>
```</p>

<h4 id="toc_8">é€šè¿‡ App Icon æ‰“å¼€ã€å…³é—­ Drawer</h4>

<p>é€šè¿‡ä½¿ç”¨ ActionBarDrawerToggle ç±»ï¼Œå¯ä»¥æ§åˆ¶è¿™äº›è¡Œä¸ºã€‚<br/>
* ç‚¹å‡»æ§åˆ¶ Drawer è¡Œä¸º<br/>
* æŒ‡å®šå±•å¼€æ—¶çš„ icon</p>

<p>æ ‡å‡†çš„å¯¼èˆª Icon å›¾æ ‡åœ¨ (Download the Action Bar Icon Pack)[<a href="http://developer.android.com/downloads/design/Android_Design_Icons_20130926.zip">http://developer.android.com/downloads/design/Android_Design_Icons_20130926.zip</a>]</p>

<p>æœ€åä½ éœ€è¦åœ¨ Activity çš„ç”Ÿå‘½å‘¨æœŸä¸­ä½¿ç”¨ ActionBarDrawerToggle çš„è¿™äº›æ–¹æ³•ã€‚<br/>
<strong>ç¤ºä¾‹ä»£ç </strong><br/>
```<br/>
public class MainActivity extends Activity {<br/>
    private DrawerLayout mDrawerLayout;<br/>
    private ActionBarDrawerToggle mDrawerToggle;<br/>
    ...</p>

<pre><code>public void onCreate(Bundle savedInstanceState) {
    ...

    mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);
    mDrawerToggle = new ActionBarDrawerToggle(
            this,                  /* host Activity */
            mDrawerLayout,         /* DrawerLayout object */
            R.drawable.ic_drawer,  /* nav drawer icon to replace &#39;Up&#39; caret */
            R.string.drawer_open,  /* &quot;open drawer&quot; description */
            R.string.drawer_close  /* &quot;close drawer&quot; description */
            ) {

        /** Called when a drawer has settled in a completely closed state. */
        public void onDrawerClosed(View view) {
            super.onDrawerClosed(view);
            getActionBar().setTitle(mTitle);
        }

        /** Called when a drawer has settled in a completely open state. */
        public void onDrawerOpened(View drawerView) {
            super.onDrawerOpened(drawerView);
            getActionBar().setTitle(mDrawerTitle);
        }
    };

    // Set the drawer toggle as the DrawerListener
    mDrawerLayout.setDrawerListener(mDrawerToggle);

    getActionBar().setDisplayHomeAsUpEnabled(true);
    getActionBar().setHomeButtonEnabled(true);
}

@Override
protected void onPostCreate(Bundle savedInstanceState) {
    super.onPostCreate(savedInstanceState);
    // Sync the toggle state after onRestoreInstanceState has occurred.
    mDrawerToggle.syncState();
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    mDrawerToggle.onConfigurationChanged(newConfig);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Pass the event to ActionBarDrawerToggle, if it returns
    // true, then it has handled the app icon touch event
    if (mDrawerToggle.onOptionsItemSelected(item)) {
      return true;
    }
    // Handle your other action bar items...

    return super.onOptionsItemSelected(item);
}
...
</code></pre>

<p>}<br/>
```</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/3/19</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Android%E5%BC%80%E5%8F%91.html'>Androidå¼€å‘</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14539061256073.html">
                
                  <h1>Smartoo å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p><code>Weiboå®¢æˆ·ç«¯ssoè®¤è¯ä¸æˆåŠŸ</code><br/>
uri mismatch çš„é—®é¢˜æ˜¯å› ä¸ºweiboå¼€æ”¾å¹³å°é…ç½®æœ‰å»¶è¿Ÿï¼Œåœ¨å¹³å°ä¸Šä¿®æ”¹redirect uriåï¼Œéš”å¤©å°±å¯ä»¥é€šè¿‡äº†<br/>
é—ªé€€çš„é—®é¢˜ï¼Œå¯èƒ½æ˜¯ç”±äºä¸æ˜¯æ‰“çš„releaseçš„åŒ…ï¼Œåšreaderçš„åˆ†äº«æ—¶å°±æœ‰è¿™æ ·çš„é—®é¢˜ã€‚æ˜å¤©ç”¨releaseçš„åŒ…æµ‹è¯•ä¸€ä¸‹ã€‚<br/>
ä½¿ç”¨webéªŒè¯å¯ä»¥é¡ºåˆ©é€šè¿‡ã€‚</p>

<p><code>æœªé€šè¿‡å®¡æ ¸å¸å·çš„æ¥å£è°ƒç”¨é™åˆ¶</code><br/>
å¤§æ¦‚åœ¨200-300æ¬¡ä¹‹é—´</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/1/27</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Android%E5%BC%80%E5%8F%91.html'>Androidå¼€å‘</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <h1>åšå®¢æœªå‘½å</h1>
                <div class="site-des">ä¸“æ³¨äºé‡æˆæ–‡æ€è·¯æ¸…æ™°çš„æŠ€æœ¯æ–‡ç« ã€‚</div>
                <div class="social">









<a target="_blank" class="github" target="_blank" href="http://github.com/auv1107" title="GitHub">GitHub</a>

  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="%E7%94%9F%E6%B4%BB%E6%97%A5%E5%B8%B8.html"><strong>ç”Ÿæ´»æ—¥å¸¸</strong></a>
        
            <a href="%E7%BB%98%E7%94%BB.html"><strong>ç»˜ç”»</strong></a>
        
            <a href="Android%E5%BC%80%E5%8F%91.html"><strong>Androidå¼€å‘</strong></a>
        
            <a href="%E4%BA%A7%E5%93%81%E6%83%B3%E6%B3%95.html"><strong>äº§å“æƒ³æ³•</strong></a>
        
            <a href="%E5%90%89%E5%AE%83%E5%AD%A6%E4%B9%A0%F0%9F%8E%B8.html"><strong>å‰å®ƒå­¦ä¹ ğŸ¸</strong></a>
        
            <a href="web%E5%BC%80%E5%8F%91.html"><strong>webå¼€å‘</strong></a>
        
            <a href="%E4%B9%A6%E7%B1%8D%E7%94%B5%E5%BD%B1.html"><strong>ä¹¦ç±ç”µå½±</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="14875026448350.html">é‡‘å…‹ä¸åŠ¨æ€çº¿ç¨¿</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="14875024153456.html">çœŸäººæ”¹æ¼«ç”»</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="14870798001565.html"></a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="14864295694789.html">ç¬¬äºŒå¼ é»˜ç”»</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="14864293409117.html">å“¥ç‰¹ç»…å£«</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?84fca9a2f5023159ce7f5a699c8bf2d0";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


  </body>
</html>
